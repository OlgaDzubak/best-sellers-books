function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},i=n.parcelRequire3984;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},n.parcelRequire3984=i),i.register("kyEFX",(function(t,n){var o,r;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var i={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},r=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"jDSjF":"shopping_list_page.e02a95b9.js","cKEZp":"amazon_icon.7230a0f0.svg","4YPMb":"ibooks_icon.1e1d3fd6.svg","8xNye":"trash-03.deb29b96.png","0398L":"stack_of_books_mobile@1x.76e2e048.png","3jUnA":"stack_of_books_mobile@2x.64a22462.png","ax4SW":"stack_of_books_tablet@1x.76e2e048.png","4uYZ5":"stack_of_books_tablet@2x.64a22462.png","l1WNw":"stack_of_books_desktop@1x.76e2e048.png","bA58A":"stack_of_books_desktop@2x.64a22462.png","d1j6q":"index.76afdb67.js"}')),i("jeON5"),i("bUb57");var a,s=i("aiKfP");a=new URL(i("kyEFX").resolve("cKEZp"),import.meta.url).toString();var l;l=new URL(i("kyEFX").resolve("4YPMb"),import.meta.url).toString();var c;c=new URL(i("kyEFX").resolve("8xNye"),import.meta.url).toString();var d;d=new URL(i("kyEFX").resolve("0398L"),import.meta.url).toString();var p;p=new URL(i("kyEFX").resolve("3jUnA"),import.meta.url).toString();var u;u=new URL(i("kyEFX").resolve("ax4SW"),import.meta.url).toString();var m;m=new URL(i("kyEFX").resolve("4uYZ5"),import.meta.url).toString();var g;g=new URL(i("kyEFX").resolve("l1WNw"),import.meta.url).toString();var b;b=new URL(i("kyEFX").resolve("bA58A"),import.meta.url).toString();var k=i("hqv3x");const _=new(0,s.booksAPI),f=[{img:t(a)}],v=[{img:t(l)}],h=[{img:t(c)}],x=document.querySelector(".shopping-wrapper"),y=(0,k.createBooksBoxTitle)(x,"Shopping List");let S=JSON.parse(localStorage.getItem("orderedBookID"))||[],L=[];let w,E,H,F=1;function R(e){return e.map((({_id:e,book_image:t,list_name:n,author:o,title:r,description:i,buy_links:a})=>` <li class="book_card">\n\n                                        <div class="book-image-div">\n                                          <img class="book-image" src='${t}' alt='${r}'>\n                                        </div>\n\n                                        <div class="book_information">\n                                          <p class="book-title">${r}</p>\n                                          <p class="book-category">${n}</p>\n                                          <p class="book-description">${i||"No description"}</p>\n                                          <p class="book-author">${o}</p>\n                                        </div>\n\n                                        <div class="closer">\n                                          <button data-id="${e}" class="bucket-btn">\n                                            <img class="image-bucket" src="${h[0].img}" alt="amazon">\n                                          </button>\n                                        </div>\n                                      \n                                        <div class="market_places_div">\n                                          <ul class="market_placers_list list">\n                                      \n                                            <li class="marketplacer_li_one">\n                                              <a href="${a[0].url}" class="marketplacer_li_link link">\n                                                <img class="image-market" src="${f[0].img}" alt="amazon">  \n                                              </a>\n                                            </li>\n                                      \n                                            <li class="marketplacer_li_two">\n                                              <a href="${a[1].url}" class="marketplacer_li_link link">\n                                                <img src="${v[0].img}" alt="apple-books">      \n                                              </a>\n                                            </li>\n                                      \n                                          </ul>\n                                        </div>\n\n                                      </li>`)).join("\n")}function $({target:e}){if(e.classList.contains("bucket-btn")){const t=S.indexOf(e.dataset.id);t+1===S.length&&L.length%3==1&&(F-=1),S.splice(t,1),L=L.filter((t=>t._id!=e.dataset.id)),localStorage.removeItem("orderedBookID"),localStorage.setItem("orderedBookID",JSON.stringify(S)),w.innerHTML=R(L.slice(3*(F-1),3*F));const n=Math.ceil(L.length/3),o=document.querySelector(".shopping_booklist_pagination");o&&(n>1?o.innerHTML=A(n,F):o.remove()),(0,k.displayOrdredAmountInShoppingBag)(S)}}function A(e,t){let n="";for(let o=1;o<=e;o++)n+=o===t?`<button type="button" class="btn-two active">${o}</button>`:`<button type="button" class="btn-two">${o}</button>`;return n}S.length?async function(e){H&&(H.abort(),console.log("abort previous ordered books fetch"));const t=(0,k.createLoader)(y);H=new AbortController;const n=await async function(e,t){try{const n=e.map((async e=>await _.getBookById(e,t)));return await Promise.all(n)}catch(e){const t=document.createElement("div");x.append(t),t.classList.add("error-box"),t.innerHTML='<p class="error-box-text">Sorry, there was a server error, please reload the page!!!</p>'}}(S,H);if(t.remove(),n.length)if(w=document.createElement("ul"),w.classList.add("list","shopping_booklist"),y.after(w),w.addEventListener("click",$),L=[],n.forEach((e=>L.push(e.data))),L.length>3){w.innerHTML=R(L.slice(0,3));const e=Math.ceil(L.length/3);e>1&&(E=document.createElement("div"),E.classList.add("shopping_booklist_pagination"),E.innerHTML=A(e,F),x.append(E),E.addEventListener("click",(e=>{if(clickedButton=e.target,!clickedButton.classList.contains("active")){const e=Number(clickedButton.textContent);!function(e,t){for(const n of e.children)Number(n.textContent)===t&&(n.classList.add("active"),F=t),Number(n.textContent)!==t&&n.classList.remove("active")}(E,e),w.innerHTML=R(L.slice(3*(e-1),3*e))}})))}else w.innerHTML=R(L)}():function(){const e=document.createElement("div");e.classList.add("empty-shopping_booklist"),e.innerHTML=`<p class="empty-shopping-box-text">This page is empty, add some books and proceed to order.</p>\n                                        <div class="empty-shopping-box-picturebox">\n                                          <picture>\n                                            <source\n                                              srcset="${t(d)} 1x, ${t(p)} 2x"\n                                              media="(max-width: 767.9px)"\n                                            >\n                                            <source\n                                            srcset="${t(u)} 1x, ${t(m)} 2x"\n                                              media="(min-width: 768px) and (max-width: 1439.8px)"\n                                            >\n                                            <source\n                                            srcset="${t(g)} 1x, ${t(b)} 2x"\n                                              media="(min-width: 1440px)"\n                                            >\n                                            <img \n                                              src=${t(g)}\n                                              alt="stack of books" \n                                            >\n                                          </picture>\n                                        </div>`,x.append(e)}(),i("76jN1"),i("iNkvP"),i("kU5er"),i("8e037");const N=document.querySelector(".js-nav-shoppinglistlink"),j=document.querySelector(".js-mobile-nav-shoppinglistlink"),U=document.querySelector(".js-mobile-shopping-bag-icon");N.classList.toggle("selected"),j.classList.toggle("mobile-selected"),U.classList.toggle("mobile-selected");
//# sourceMappingURL=shopping_list_page.e02a95b9.js.map
