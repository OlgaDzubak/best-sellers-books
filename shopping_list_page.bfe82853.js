function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},i={},r=n.parcelRequire3984;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},n.parcelRequire3984=r),r.register("kyEFX",(function(t,n){var o,i;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var r={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},i=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("kyEFX").register(JSON.parse('{"jDSjF":"shopping_list_page.bfe82853.js","cKEZp":"amazon_icon.7230a0f0.svg","4YPMb":"ibooks_icon.1e1d3fd6.svg","8xNye":"trash-03.deb29b96.png","0398L":"stack_of_books_mobile@1x.76e2e048.png","3jUnA":"stack_of_books_mobile@2x.64a22462.png","ax4SW":"stack_of_books_tablet@1x.76e2e048.png","4uYZ5":"stack_of_books_tablet@2x.64a22462.png","l1WNw":"stack_of_books_desktop@1x.76e2e048.png","bA58A":"stack_of_books_desktop@2x.64a22462.png","d1j6q":"index.b5c06056.js"}')),r("jeON5"),r("bUb57");var s,a=r("aiKfP"),l=r("hqv3x");s=new URL(r("kyEFX").resolve("cKEZp"),import.meta.url).toString();var c;c=new URL(r("kyEFX").resolve("4YPMb"),import.meta.url).toString();var d;d=new URL(r("kyEFX").resolve("8xNye"),import.meta.url).toString();var p;p=new URL(r("kyEFX").resolve("0398L"),import.meta.url).toString();var u;u=new URL(r("kyEFX").resolve("3jUnA"),import.meta.url).toString();var m;m=new URL(r("kyEFX").resolve("ax4SW"),import.meta.url).toString();var g;g=new URL(r("kyEFX").resolve("4uYZ5"),import.meta.url).toString();var b;b=new URL(r("kyEFX").resolve("l1WNw"),import.meta.url).toString();var f;f=new URL(r("kyEFX").resolve("bA58A"),import.meta.url).toString();l=r("hqv3x");const k=new(0,a.booksAPI),_=[{img:t(s)}],h=[{img:t(c)}],v=[{img:t(d)}],x=document.querySelector(".shopping-wrapper"),y=(0,l.createBooksBoxTitle)(x,"Shopping List");let L=JSON.parse(localStorage.getItem("orderedBookID"))||[],S=[];let E,w,H,F=1;function A(e,t,n){return e.map((({_id:e,book_image:o,list_name:i,author:r,title:s,description:a,buy_links:l},c)=>` <li data-id="${e}" class="book-card ${c>=t&&c<=n?"":"non-active"}">\n\n                                        <div class="book-image-div">\n                                          <img class="book-image" src='${o}' alt='${s}'>\n                                        </div>\n\n                                        <div class="book_information">\n                                          <p class="book-title">${s}</p>\n                                          <p class="book-category">${i}</p>\n                                          <p class="book-description">${a||"No description"}</p>\n                                          <p class="book-author">${r}</p>\n                                        </div>\n\n                                        <div class="closer">\n                                          <button data-id="${e}" class="bucket-btn">\n                                            <img class="image-bucket" src="${v[0].img}" alt="amazon">\n                                          </button>\n                                        </div>\n                                      \n                                        <div class="market_places_div">\n                                          <ul class="market_placers_list list">\n                                      \n                                            <li class="marketplacer_li_one">\n                                              <a href="${l[0].url}" class="marketplacer_li_link link">\n                                                <img class="image-market" src="${_[0].img}" alt="amazon">  \n                                              </a>\n                                            </li>\n                                      \n                                            <li class="marketplacer_li_two">\n                                              <a href="${l[1].url}" class="marketplacer_li_link link">\n                                                <img src="${h[0].img}" alt="apple-books">      \n                                              </a>\n                                            </li>\n                                      \n                                          </ul>\n                                        </div>\n\n                                      </li>`)).join("\n")}function $({target:e}){if(e.classList.contains("bucket-btn")){const t=document.querySelectorAll(".bucket-btn");t.forEach((e=>e.setAttribute("disabled","")));const n=L.indexOf(e.dataset.id);L.splice(n,1),S=S.filter((t=>t._id!=e.dataset.id)),localStorage.removeItem("orderedBookID"),localStorage.setItem("orderedBookID",JSON.stringify(L));E.children[n].classList.add("shift-right");const o=n-3*Math.trunc(n/3),i=600;setTimeout((()=>{if(n+1<E.children.length){const e=n+1,t=n+(2-o)>=E.children.length-1?E.children.length-1:n+(2-o);for(let n=e;n<=t;n++){E.children[n].classList.add("shift-up")}}}),i),setTimeout((()=>{E.children[n].remove(),(0,l.displayOrdredAmountInShoppingBag)(L),t.forEach((e=>e.removeAttribute("disabled"))),0===E.children.length&&T(),[...E.children].forEach((e=>{e.classList.remove("shift-right"),e.classList.remove("shift-up")}));const e=[...E.children].findIndex(((e,t)=>t>n-1&&e.classList.contains("non-active"))),o=Math.ceil(S.length/3);-1!=e?E.children[e].classList.remove("non-active"):n===L.length&&S.length%3==0&&(F-=1,E.innerHTML=A(S,3*(F-1),3*F-1));const i=document.querySelector(".shopping_booklist_pagination");i&&(o>1?i.innerHTML=R(o,F):i.remove())}),2*i)}}function R(e,t){let n="";for(let o=1;o<=e;o++)n+=o===t?`<button type="button" class="btn-two active">${o}</button>`:`<button type="button" class="btn-two">${o}</button>`;return n}function T(){const e=document.createElement("div");e.classList.add("empty-shopping_booklist"),e.innerHTML=`<p class="empty-shopping-box-text">This page is empty, add some books and proceed to order.</p>\n                                        <div class="empty-shopping-box-picturebox">\n                                          <picture>\n                                            <source\n                                              srcset="${t(p)} 1x, ${t(u)} 2x"\n                                              media="(max-width: 767.9px)"\n                                            >\n                                            <source\n                                            srcset="${t(m)} 1x, ${t(g)} 2x"\n                                              media="(min-width: 768px) and (max-width: 1439.8px)"\n                                            >\n                                            <source\n                                            srcset="${t(b)} 1x, ${t(f)} 2x"\n                                              media="(min-width: 1440px)"\n                                            >\n                                            <img \n                                              src=${t(b)}\n                                              alt="stack of books" \n                                            >\n                                          </picture>\n                                        </div>`,x.append(e)}L.length?async function(e){H&&(H.abort(),console.log("abort previous ordered books fetch"));const t=(0,l.createLoader)(y);H=new AbortController;const n=await async function(e,t){try{const n=e.map((async e=>await k.getBookById(e,t)));return await Promise.all(n)}catch(e){const t=document.createElement("div");x.append(t),t.classList.add("error-box"),t.innerHTML='<p class="error-box-text">Sorry, there was a server error, please reload the page!!!</p>'}}(L,H);if(t.remove(),n.length)if(E=document.createElement("ul"),E.classList.add("list","shopping_booklist"),y.after(E),E.addEventListener("click",$),S=[],n.forEach((e=>S.push(e.data))),S.length>=3){E.innerHTML=A(S,0,2);const e=Math.ceil(S.length/3);e>1&&(w=document.createElement("div"),w.classList.add("shopping_booklist_pagination"),w.innerHTML=R(e,F),x.append(w),w.addEventListener("click",(e=>{const t=e.target;if(!t.classList.contains("active")){const e=Number(t.textContent);!function(e,t){if(e)for(const n of e.children)Number(n.textContent)===t&&(n.classList.add("active"),F=t),Number(n.textContent)!==t&&n.classList.remove("active")}(w,e),E.innerHTML=A(S,3*(e-1),3*e-1),(0,l.scrollToBoxTop)(x)}})))}else E.innerHTML=A(S,0,2)}():T(),r("76jN1"),r("iNkvP"),r("kU5er"),r("8e037");const N=document.querySelector(".js-nav-shoppinglistlink"),j=document.querySelector(".js-mobile-nav-shoppinglistlink"),M=document.querySelector(".js-mobile-shopping-bag-icon");N.classList.toggle("selected"),j.classList.toggle("mobile-selected"),M.classList.toggle("mobile-selected");
//# sourceMappingURL=shopping_list_page.bfe82853.js.map
