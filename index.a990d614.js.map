{"mappings":"oeAAAA,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,SAEO,MAAME,EAGmBC,GAAhB,6CAGZC,YAAYC,GAAW,OAAOJ,EAAAK,QAAMC,IAAI,GAAGC,MAAKL,IAAYE,I,CAC5DI,cAAgB,OAAOR,EAAAK,QAAMC,IAAI,GAAGC,MAAKL,a,CACzCO,kBAAoB,OAAOT,EAAAK,QAAMC,IAAI,GAAGC,MAAKL,iB,CAC7CQ,mBAAmBC,GAAY,OAAOX,EAAAK,QAAMC,IAAI,GAAGC,MAAKL,sBAA8BS,I,ECVrC,SAA5CC,EAAWC,EAAQC,GAC1B,KAAGD,EAAOE,OAASC,OAAOF,IAOtB,OAAOD,EANP,OAWqC,SAAtBI,EAAKC,GAExB,MAAMC,EAAOD,EAAOH,OACpB,IAAIK,EAAQ,EACRC,EAAUJ,EACVK,EAAML,EAAIM,QAAQL,GAEtB,KAAOI,GAAO,GACZF,GAAgB,EAChBC,EAAUA,EAAQG,MAAMF,EAAIH,GAC5BG,EAAMD,EAAQE,QAAQL,GAExB,OAAOE,C,CAvBKK,CAAYZ,EAAQ,MAC1B,KAAK,EAEL,QAAS,OAAOA,EAAOW,MAAM,EAAGR,OAAOF,EAAM,IAAM,MADnD,KAAK,EAAI,OAAOD,EAAOW,MAAM,EAAGR,OAAOF,EAAM,IAAM,M,CAyB3D,SAASY,EAAab,GAClB,MAAMc,EAAUd,EAAOe,MAAM,KAE7B,MAAO,GADWD,EAAQE,OAAO,EAAGF,EAAQZ,OAAS,GACjCe,KAAK,sCAAsCH,EAAQG,KAAK,Y,kBC7BhF,MAAMC,EAAa,IAAI9B,EACjB+B,EAAkBC,SAASC,cAAc,sBACzCC,EAAWF,SAASC,cAAc,cAClCE,EAASJ,EAAgBE,cAAc,WACvCG,EAASF,EAASD,cAAc,WAChCI,EAAYL,SAASC,cAAc,kBAoE7B,SAACK,EAA6BC,EAAMC,GA4BpC,MAAO,uLA1BID,EAAKE,KAAI,EAACC,UAACA,EAASC,MAAEA,MACjC,MAAMC,EAAY,yBAAyBF,QAE3C,GAAIC,EAAM7B,OAAQ,CAad,MAAO,oCAAoC8B,yDAZhCD,EAAMf,OAAO,EAAGY,GAAQC,KAAI,EAACI,IAACA,EAAGC,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,KACjE,kCAAkCH,yFAEdC,WAAoBC,qPAKZpC,EAAWoC,EAAO,kDACtBpC,EAAWqC,EAAQ,mCACnCnB,KAAK,mGAI2Da,sD,CAGxE,MAAO,+LAEQ,IACfb,KAAK,K,CAOT,SAACoB,EAA4BV,EAAMC,GAEvC,GAAGD,EAAKzB,OAAO,CACX,MAAMoC,EAASX,EAAKE,KAAI,EAACI,IAACA,EAAGC,WAAEA,EAAUE,OAAEA,EAAMD,MAAEA,KACnD,kCAAkCF,iFAEdC,WAAoBC,iOAKZpC,EAAWoC,EAAO,8CACtBpC,EAAWqC,EAAQ,+BAEzCnB,KAAK,IAEP,MAAO,gCAAgCJ,EAAac,EAAK,GAAGG,wEAClBQ,Q,CAEtC,MAAO,+L,CAyBgBC,eAApBC,IAEXhB,EAAQiB,UAAUC,OAAO,qBAEzB,MAAMf,QAxH6CY,iBACnD,IACI,MAAMZ,KAAEA,SAAeT,EAAWvB,cAClC,OAAKgC,EAAKzB,OACHyB,EADoBgB,EAAAC,OAAOC,QAAQ,uE,CAE7C,MAAOC,GAGJ,OAFAC,QAAQD,MAAMA,GACdH,EAAAC,OAAOC,QAAQ,0DAA2D,CAACG,QAAS,MAC7E,E,EAgHQC,GAEnB,GAAItB,EAAKzB,OAAQ,CAEb,MAAMgD,EAAY9B,SAAS+B,gBAAgBC,YAGvC9B,EAAS+B,UAAY3B,EAA6BC,EADlDuB,EAAY,IAC4C,EACjDA,EAAY,MAAQA,GAAa,IACgB,EAEA,E,MAI5D1B,EAAQiB,UAAUa,IAAI,oB,CAKwBf,eAAvCgB,GAAoBC,OAACA,IAChC,GAAMA,EAAOf,UAAUgB,SAAS,uBAA4BD,EAAOf,UAAUgB,SAAS,eAE/E,CACH,IAAI3D,EAAW0D,EAAOE,GAAG3C,MAAM,KAAKE,KAAK,OACzC,GAAiB,wBAAbnB,EACAwB,EAAS+B,UAAY,GACrBb,QACG,CACHlB,EAAS+B,UAAW,GACFjC,SAAS+B,gBAAgBC,YAA3C,MAEOzB,QA5IwCY,eAAvBzC,GAChC,IACI,MAAM6B,KAAEA,SAAeT,EAAWrB,mBAAmBC,GACrD,OAAK6B,EAAKzB,OACHyB,EADoBgB,EAAAC,OAAOC,QAAQ,iCAAmC/C,EAAW,2C,CAG5F,MAAOgD,GAGH,OAFAC,QAAQD,MAAMA,GACdH,EAAAC,OAAOC,QAAQ,2DACR,E,EAmIkBc,CAAqB7D,GAC1C,IAAI6B,EAAKzB,OAWL,YADAyC,EAAAC,OAAOC,QAAQ,2DAPXvB,EAAS+B,UAAYhB,EAA4BV,GAUzDiC,G,GA6BkB,SAArBA,IACLC,OAAOC,SAAS,CACZC,IAAK,EACLC,SAAU,WAGdvC,EAAUgB,UAAUa,IAAI,gB,CApOHd,IAiIoCD,iBAEzDhB,EAAQkB,UAAUC,OAAO,qBAEzB,MAAMf,QAzHqCY,iBAC3C,IACI,MAAMZ,KAAEA,SAAeT,EAAWtB,kBAClC,OAAK+B,EAAKzB,OAGHyB,EAFIgB,EAAAC,OAAOC,QAAQ,uE,CAI9B,MAAOC,GAGH,OAFAC,QAAQD,MAAMA,GACdH,EAAAC,OAAOC,QAAQ,0DAA2D,CAACG,QAAS,MAC7E,E,EA8GQiB,GAEftC,EAAKzB,QACLiB,EAAgBkC,UAhFD,SAAW1B,GAC9B,IAAIuC,EAAmB,+JAMvB,OAJAvC,EAAKwC,SAAQrE,IACT,MAAMsE,EAAe,UAAUtE,EAASgC,yCAAyChC,EAASgC,gBAC1FoC,GAAoBE,CAAY,IAE7BF,C,CAyEyBG,CAAyB1C,GACrDR,EAAgBsB,UAAUa,IAAI,gCAE9B/B,EAAQkB,UAAUa,IAAI,oB,CA1IlCgB,GAEsCnD,EAAtBoD,iBAAiB,QAAShB,GACnBjC,EAAdiD,iBAAiB,SAuMkBhC,eAAjBiC,GAEnBA,EAAMC,iBAEN,MAAMjB,OAAEA,GAAWgB,EAEnB,IACI,IAAIhB,EAAOf,UAAUgB,SAAS,eAC1B,OAEAF,EAAoBiB,GACpBZ,G,CAEN,MAAOd,GACLC,QAAQD,MAAMA,GACdH,EAAAC,OAAOC,QAAQ,0D,KArNdpB,EAAH8C,iBAAiB,QAASX,GACpCC,OAAOU,iBAAiB,UAiOpB,WACI,MAAMG,EAASb,OAAOc,SAAWd,OAAOe,YAClCC,EAAezD,SAAS+B,gBAAgB2B,aAC1CJ,EAASG,EACTpD,EAAUgB,UAAUC,OAAO,iBAE3BjB,EAAUgB,UAAUa,IAAI,gB,gCCrPpC,MAAMyB,EAAQ,IAAI3F,EAClB,IAAI4F,EACJ,MAAMC,EAAiB7D,SAASC,cAAc,cACxC6D,EAAY9D,SAASC,cAAc,SACnC8D,EAAgB/D,SAASC,cAAc,oBACvC+D,EAAWhE,SAASC,cAAc,QAClCgE,EAAcjE,SAASC,cAAc,WACrCiE,EAASlE,SAASC,cAAc,kBAEhCkE,EAAY,CACdC,eAAgB,EAChBC,iBACIF,EAAUC,eAAiB3B,OAAOc,QAClCvD,SAASsE,KAAKjD,UAAUa,IAAI,gBAE5BlC,SAASsE,KAAKC,MAAMC,QAAU,SAASL,EAAUC,mB,EAGrDK,gBACIzE,SAASsE,KAAKjD,UAAUC,OAAO,gBAC/BtB,SAASsE,KAAKC,MAAMC,QAAU,SAC9B/B,OAAOiC,OAAO,CAAC/B,IAAKwB,EAAUC,gB,GAuBtCjD,eAAewD,EAAkBC,GAC7BT,EAAUE,iBACVrE,SAASmD,iBAAiB,WAAWC,IACf,WAAdA,EAAMyB,KACNC,GAAc,GAEnB,CAACC,MAAM,IACV,IACI,MAAMC,QAAgBrB,EAAMzF,YAAY0G,IAClC5D,OAAEA,EAAMF,WAAEA,EAAUmE,YAAEA,EAAWlE,MAAEA,EAAKmE,UAAEA,GAAcF,EAAQzE,KAChE4E,EAAYnF,SAASC,cAAc,aACnCmF,EAAapF,SAASC,cAAc,cACpCoF,EAAWrF,SAASC,cAAc,WAClCqF,EAAgBtF,SAASC,cAAc,gBACvCsF,EAAWvF,SAASC,cAAc,WAClCuF,EAAUxF,SAASC,cAAc,UACjCwF,EAAWzF,SAASC,cAAc,WACxCkF,EAAUlD,UAAY,GACtB,MAAMyD,EAAc,aAAa5E,WAAoBA,wBACrDsE,EAAWO,YAAc5E,EACzBsE,EAASM,YAAc3E,EAEnBsE,EAAcK,YADE,KAAhBV,EAC4B,iBAEAA,EAGhCM,EAASK,WAAW,GAAG/G,MAAQqG,EAAU,GAAGW,IAC5CL,EAAQI,WAAW,GAAG/G,MAAQqG,EAAU,GAAGW,IAC3CJ,EAASG,WAAW,GAAG/G,MAAQqG,EAAU,GAAGW,IAE5CV,EAAUlD,UAAYyD,EACtB5B,EAAUzC,UAAUyE,OAAO,aAC3B,MAAMC,EAAWC,aAAaC,QAAQ,iBAChCC,EAAQC,KAAKC,MAAML,GACX,OAAVG,GAAmBA,EAAMG,SAASzB,IAGlCX,EAAY5C,UAAUC,OAAO,aAC7B4C,EAAO7C,UAAUC,OAAO,cAHxB0C,EAAS3C,UAAUC,OAAO,Y,CAKhC,MAAOI,GACLC,QAAQD,MAAMA,GACdF,OAAOC,QAAQ,0D,EAOvB,SAASqD,IACLX,EAAUM,gBACVX,EAAUzC,UAAUyE,OAAO,aAC3B7B,EAAY5C,UAAUa,IAAI,aAC1B8B,EAAS3C,UAAUa,IAAI,aACvBgC,EAAO7C,UAAUa,IAAI,Y,CA1EzB2B,EAAeV,iBAAiB,SAEhC,SAAkBC,GAEoB,aAA9BA,EAAMhB,OAAOf,UAAU,IAAmD,YAA9B+B,EAAMhB,OAAOf,UAAU,IACnEuC,EAAUR,EAAMhB,OAAOkE,cAAcA,cAAcC,QAAQjE,GAE3DqC,EAAkBf,IACmB,oBAA9BR,EAAMhB,OAAOf,UAAU,IAC9BuC,EAAUR,EAAMhB,OAAOkE,cAAcA,cAAcA,cAAcC,QAAQjE,GAEzEqC,EAAkBf,IACmB,eAA9BR,EAAMhB,OAAOf,UAAU,IAAqD,WAA9B+B,EAAMhB,OAAOf,UAAU,KAC5EuC,EAAUR,EAAMhB,OAAOkE,cAAcC,QAAQjE,GAE7CqC,EAAkBf,G,IAoD1BG,EAAcZ,iBAAiB,QAAS2B,GAUxCd,EAASb,iBAAiB,SAG1B,WACIa,EAAS3C,UAAUa,IAAI,aACvB+B,EAAY5C,UAAUC,OAAO,aAC7B4C,EAAO7C,UAAUC,OAAO,aACxB,MAAMyE,EAAWC,aAAaC,QAAQ,iBACtC,IAAIC,EAAQC,KAAKC,MAAML,GAET,OAAVG,IACAA,EAAQ,IAEZA,EAAMM,KAAK5C,GACXoC,aAAaS,QAAQ,gBAAiBN,KAAKO,UAAUR,KACrD,EAAAS,EAAAC,mBAAkBV,E,IAdtBjC,EAAYd,iBAAiB,SAiB7B,WACIa,EAAS3C,UAAUC,OAAO,aAC1B2C,EAAY5C,UAAUa,IAAI,aAC1BgC,EAAO7C,UAAUa,IAAI,aACrB,MAAM6D,EAAWC,aAAaC,QAAQ,iBAChCC,EAAQC,KAAKC,MAAML,GACzB,IAAIc,EAAIX,EAAM5G,QAAQsE,GACtBsC,EAAMtG,OAAOiH,EAAG,GAChBb,aAAac,WAAW,iBACxBd,aAAaS,QAAQ,gBAAiBN,KAAKO,UAAUR,KACrD,EAAAS,EAAAC,mBAAkBV,E,0BJ5HtB,MAAMa,EAAa/G,SAASC,cAAc,oBACpC+G,EAAmBhH,SAASC,cAAc,2BAChD8G,EAAW1F,UAAUyE,OAAO,YAC5BkB,EAAiB3F,UAAUyE,OAAO","sources":["src/index.js","src/js/booksAPI.js","src/js/help_functions.js","src/js/books.js","src/js/book_modal_window.js"],"sourcesContent":["import './js/isChangeTheme';\n import './js/support_ukraine';\nimport './js/books';\nimport './js/autorization_modal_window';\nimport './js/book_modal_window';\nimport './js/mobile_menu';\nimport './js/about_us_modal_window';\n\n\nconst homeLinkEl = document.querySelector('.js-nav-homelink');\nconst mobileHomeLinkEl = document.querySelector('.js-mobile-nav-homelink');\nhomeLinkEl.classList.toggle('selected');\nmobileHomeLinkEl.classList.toggle('mobile-selected');\n\n\n\n","import axios from \"axios\";\n\nexport class booksAPI {\n\n  // приватні властивості для запиту \n    #BASE_URL = 'https://books-backend.p.goit.global/books/';\n\n    //методи классу\n    getBookById(book_Id) { return axios.get(`${this.#BASE_URL}${book_Id}`); }\n    getTopBooks() { return axios.get(`${this.#BASE_URL}top-books`); }\n    getCategoryList() { return axios.get(`${this.#BASE_URL}category-list`); }\n    getBooksByCategory(category) { return axios.get(`${this.#BASE_URL}category?category=${category}`) };\n}\n","// Функція що скорочує рядок string до довжини value та додає три крапки в кінці\nfunction shortTitle(string, value) {\n  if(string.length > Number(value)){\n      switch (subStrCount(string, \" \")){\n        case 0: return string.slice(0, Number(value-2)) + '...';\n        case 1:  return string.slice(0, Number(value-1)) + '...';\n        default: return string.slice(0, Number(value-2)) + '...';\n      }\n  }else{\n      return string;\n  }\n}\n\n// Функція, яка підраховує кількість входжень рядка subStr в str\nfunction subStrCount(str, subStr){\n\n  const step = subStr.length;\n  let count = 0;\n  let helpStr = str;\n  let pos = str.indexOf(subStr);\n  \n  while (pos >= 0){\n    count = count + 1;\n    helpStr = helpStr.slice(pos+step);\n    pos = helpStr.indexOf(subStr);\n  }\n  return count;  \n}\n  \n// Функція що робить синім кольором останнє слово в рядку string\nfunction lastBlueWord(string) {\n    const arrWord = string.split(\" \");\n    const firstWord = arrWord.splice(0, arrWord.length - 1);\n    return `${firstWord.join(' ')} <span class=\"last-word-color\">${arrWord.join('')}</span>`\n}\n\nexport {shortTitle, lastBlueWord};","import { booksAPI } from './booksAPI';\nimport {shortTitle, lastBlueWord} from './help_functions';\nimport { Notify } from 'notiflix';\n\nconst fetchBooks = new booksAPI()\nconst categoryListBox = document.querySelector(\".category-list-box\");   // сюди буде рендеритися список категорій книжок\nconst booksBox = document.querySelector(\".books-box\");                  // сюди буде рендеритися список best sellers books\nconst loader1 =categoryListBox.querySelector(\".loader\");\nconst loader2 =booksBox.querySelector(\".loader\");\nconst btnScroll = document.querySelector('.btn-up-scroll');             // Змінна та слухач на кнопку скарола\n\nshowBestSellersBooks();\nshowCategoryList();                                                     // завантажуємо та показуємо список категорій\n\ncategoryListBox.addEventListener('click', showBooksOfCategory);         // подія на обрання категорії\nbooksBox.addEventListener('click', seeMore);                            // подія на кнопку seeMore\nbtnScroll.addEventListener('click', scrollUp)\nwindow.addEventListener('scroll', scrollTracker);\n\n\n// функції завантаження даних з бекенду -------------------------------------------------------------------------\n        \n        // Функція запиту на отримання назв категорій від бекенду\n    async function fetchCategoryList() {\n        try {\n            const { data } = await fetchBooks.getCategoryList();\n            if (!data.length) { \n                return Notify.failure(\"Can't find list of categories on the server. Please reload the page!\"); \n            }\n            return data;\n        }\n        catch (error) {\n            console.error(error);\n            Notify.failure('Sorry, there was a server error, please reload the page', {timeout: 3000});\n            return [];\n        } \n    }\n        // Функція запиту на отримання списку найкращіх книжок від бекенду\n    async function fetchBestSellersBooks() {\n        try {\n            const { data } = await fetchBooks.getTopBooks();\n            if (!data.length) { return Notify.failure(\"Can't find best sellers books on the server. Please reload the page!\"); }\n            return data;\n        }catch (error){\n            console.error(error);\n            Notify.failure('Sorry, there was a server error, please reload the page', {timeout: 3000});\n            return [];\n        }\n    }\n        // Функція запиту на отримання списку книг однієї категорії від бекенду\n    async function fetchBooksOfCategory(category) {\n        try {\n            const { data } = await fetchBooks.getBooksByCategory(category);\n            if (!data.length) { return Notify.failure(\"Can't find books of category <\" + category + \"> on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error) {\n            console.error(error);\n            Notify.failure('Sorry, there was a server error, please reload the page');\n            return [];\n        } \n    }\n\n\n// функції формування розмітки -----------------------------------------------------------------------------------\n\n        // розмітка списку категорій\n    function createCategoryListMarkup(data) {\n        let categoryListHTML = `<include src=\"partials/loader.html \"></include>\n                                <h3 id=\"category-list-title\" class=\"category-list-item\">All categories</h3>`;\n        data.forEach(category => {\n            const categoryLink = `<p id=\"${category.list_name}\" class=\"category-list-item\">${category.list_name}</p>`;\n            categoryListHTML += categoryLink;\n        });\n        return categoryListHTML;\n    };\n        // розмітка best sellers books\n    function createBestSellersBooksMarcup(data, querty) {\n\n        const markup = data.map(({list_name, books}) => {\n            const titleBook = `<p class=\"theme-book\">${list_name}</p>`;\n\n            if (books.length) {\n                let book = books.splice(0, querty).map(({_id, book_image, title, author}) => \n                `<li class=\"item-book\" data-id=\"${_id}\">\n                    <div class=\"img-owerlay\">\n                        <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book\">\n                        <div class=\"owerlay\">\n                            <p class=\"owerlay-content\">quick view</p>\n                        </div>\n                    </div>\n                    <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                    <p class=\"author\">${shortTitle(author, 34)}</p>\n                </li>`).join('');\n\n                return `<div class=\"best-book-container\">${titleBook}\n                            <ul class=\"list-books\">${book}</ul>\n                            <button type=\"button\" class=\"button-more js-btn-more\" id=\"${list_name}\">See more</button>\n                        </div>`\n            } else {\n                return `<div class=\"off-books\">\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </div>`\n            }}).join('');\n\n            return `<include src=\"partials/loader.html \"></include>\n                    <h2 class=\"title-theme-book\">Best Sellers <span class=\"last-word-color\">Books</span></h2>\n                    ${markup}`;\n    }\n        // розмітка books of category\n    function createBooksOfCategoryMarcup(data, querty) {\n\n        if(data.length){\n            const markup = data.map(({_id, book_image, author, title}) => \n            `<li class=\"item-book\" data-id=\"${_id}\">\n                <div class=\"img-owerlay\">\n                    <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book\">\n                    <div class=\"owerlay\">\n                        <p class=\"owerlay-content\">quick view</p>\n                    </div>\n                </div>\n                <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                <p class=\"author\">${shortTitle(author, 34)}</p>\n            </li>`\n            ).join('')\n\n            return `<h2 class=\"title-theme-book\">${lastBlueWord(data[0].list_name)}</h2>\n                    <ul class=\"list-books category\">${markup}</ul>`\n        } else {\n                return `<div class=\"off-books\">\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </div>`\n        }\n    }\n\n\n\n// функції виводу даних на сайт ----------------------------------------------------------------------------------\n\n        // Відправлення запиту і формування списку під час завантаження сторінки \n    async function showCategoryList() {\n        \n        loader1.classList.remove('loader-non-active');\n\n        const data = await fetchCategoryList();\n\n        if (data.length) {\n            categoryListBox.innerHTML = createCategoryListMarkup(data);\n            categoryListBox.classList.add(\"category-list-box-not-empty\");\n        }else{          \n            loader1.classList.add('loader-non-active');\n        }\n    };\n        // Відправлення запиту і формування списку best sellers books \n    async function showBestSellersBooks(){\n        \n        loader2.classList.remove('loader-non-active');\n\n        const data = await fetchBestSellersBooks();\n\n        if (data.length) {\n            \n            const pageWidth = document.documentElement.scrollWidth;\n\n            if (pageWidth < 768) {\n                booksBox.innerHTML = createBestSellersBooksMarcup(data, 1);\n            } else if (pageWidth < 1440 && pageWidth >= 768) {\n                booksBox.innerHTML = createBestSellersBooksMarcup(data, 3);\n            } else {\n                booksBox.innerHTML = createBestSellersBooksMarcup(data, 5);\n            }\n            \n        } else {\n            loader2.classList.add('loader-non-active');\n        }\n\n    }\n        // Відправлення запиту і формування списку книг однієї категорії \n    async function showBooksOfCategory({target}){\n        if ((!target.classList.contains('category-list-item')) && (!target.classList.contains('js-btn-more'))){\n            return;\n        } else {\n            let category = target.id.split(\" \").join(\"%20\");\n            if (category === 'category-list-title') {\n                booksBox.innerHTML = '';\n                showBestSellersBooks();\n            } else {\n                booksBox.innerHTML ='';\n                const pageWidth = document.documentElement.scrollWidth;\n\n                 const data  = await fetchBooksOfCategory(category);\n                if (data.length) {\n\n                    if (pageWidth < 768) {\n                        booksBox.innerHTML = createBooksOfCategoryMarcup(data, 1);\n                    } else if (pageWidth < 1440 && pageWidth >= 768) {\n                        booksBox.innerHTML = createBooksOfCategoryMarcup(data, 3);\n                    } else {\n                        booksBox.innerHTML = createBooksOfCategoryMarcup(data, 5);\n                    }\n                } else {\n                    Notify.failure(\"Sorry, there was a server error, please reload the page\");\n                    return;\n                }\n                scrollUp();\n            }\n        }\n    }\n\n\n\n// функції для кнопки see more та скролу на початок сторінки -----------------------------------------------------\n\n        //Функція для кнопки seeMore cписку книг однієї категорії\n    async function seeMore(event) {\n        \n        event.preventDefault();\n            \n        const { target } = event;\n                \n        try {\n            if(!target.classList.contains('js-btn-more')) { \n                return;\n            } else {\n                showBooksOfCategory(event);\n                scrollUp();\n            }\n        } catch (error) {\n            console.error(error);\n            Notify.failure('Sorry, there was a server error, please reload the page');\n        }\n    }\n        // Функція скролу на початок сторінки\n    function scrollUp() {\n        window.scrollTo({\n            top: 0,\n            behavior: 'smooth'\n        })\n\n        btnScroll.classList.add('is-hidden-btn')\n    }\n        // Функція показу кнопки повернення на початок сторінки\n    function scrollTracker() {\n        const offset = window.scrollY || window.pageYOffSet;\n        const highDocument = document.documentElement.clientHeight;\n        if (offset > highDocument) {\n            btnScroll.classList.remove('is-hidden-btn');\n        } else {\n            btnScroll.classList.add('is-hidden-btn');\n        }\n    }","import { booksAPI } from './booksAPI';\nimport { countShoppingBook } from './header';\n\nconst books = new booksAPI;\nlet book_Id;\nconst divContainerEl = document.querySelector('.books-box');\nconst divBackEl = document.querySelector('.back');\nconst btnCloseModal = document.querySelector('.btn-modal-close');\nconst btnAddEl = document.querySelector('.add');\nconst btnRemoveEl = document.querySelector('.remove');\nconst textEl = document.querySelector('.modal-message');\n\nconst objScroll = {\n    scrollPosition: 0,\n    disabledScroll() {\n        objScroll.scrollPosition = window.scrollY;\n        document.body.classList.add('block-scroll');\n\n        document.body.style.cssText = `top: -${objScroll.scrollPosition}px;`\n    },\n\n    enabledScroll() {\n        document.body.classList.remove('block-scroll');\n        document.body.style.cssText = `top: 0`\n        window.scroll({top: objScroll.scrollPosition})\n    },\n}\n\ndivContainerEl.addEventListener('click', onReadId);\n\nfunction onReadId(event) {\n    \n    if (event.target.classList[0] === 'img-book' || event.target.classList[0] === 'owerlay') {\n        book_Id = event.target.parentElement.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    } else if (event.target.classList[0] === 'owerlay-content') {\n        book_Id = event.target.parentElement.parentElement.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    } else if (event.target.classList[0] === 'title-book' || event.target.classList[0] === 'author') {\n        book_Id = event.target.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    }\n}\n\nasync function createModalWindow(book_Id) {\n    objScroll.disabledScroll();\n    document.addEventListener(\"keydown\", event => {\n        if (event.key === 'Escape') {\n            onCloseModal();\n        }\n    }, {once: true} );\n    try {\n        const respons = await books.getBookById(book_Id);\n        const { author, book_image, description, title, buy_links } = respons.data;\n        const randerBox = document.querySelector('.book-img');\n        const nameBookEl = document.querySelector('#name-book');\n        const authorEl = document.querySelector('#author');\n        const descriptionEl = document.querySelector('#description');\n        const amazonEl = document.querySelector('#amazon');\n        const appleEl = document.querySelector('#apple');\n        const barnesEl = document.querySelector('#barnes');\n        randerBox.innerHTML = '';\n        const randerModal = `<img src=\"${book_image}\" alt=\"${book_image}\" class=\"img-modal\">`\n        nameBookEl.textContent = title;\n        authorEl.textContent = author;\n        if (description === '') {\n            descriptionEl.textContent = 'No description';\n        } else {\n            descriptionEl.textContent = description\n        }\n        \n        amazonEl.attributes[0].value = buy_links[0].url;\n        appleEl.attributes[0].value = buy_links[1].url;\n        barnesEl.attributes[0].value = buy_links[2].url;\n\n        randerBox.innerHTML = randerModal;\n        divBackEl.classList.toggle('is-hidden');\n        const dataJson = localStorage.getItem('orderedBookID');\n        const arrLs = JSON.parse(dataJson);\n        if (arrLs === null || !arrLs.includes(book_Id)) {\n            btnAddEl.classList.remove('is-hidden');\n        } else {\n            btnRemoveEl.classList.remove('is-hidden');\n            textEl.classList.remove('is-hidden');\n        }\n    } catch (error) {\n        console.error(error);\n        Notify.failure('Sorry, there was a server error, please reload the page');\n    }\n    \n};\n\nbtnCloseModal.addEventListener('click', onCloseModal);\n\nfunction onCloseModal() {\n    objScroll.enabledScroll();\n    divBackEl.classList.toggle('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    btnAddEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n}\n\nbtnAddEl.addEventListener('click', addLocalStorage);\nbtnRemoveEl.addEventListener('click', removeLocalStorage);\n\nfunction addLocalStorage() {\n    btnAddEl.classList.add('is-hidden');\n    btnRemoveEl.classList.remove('is-hidden');\n    textEl.classList.remove('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    let arrLs = JSON.parse(dataJson); //book_Id\n    /* console.log(arrLs) */\n    if (arrLs === null) {\n        arrLs = [];\n    }\n    arrLs.push(book_Id);\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    countShoppingBook(arrLs)\n};\n\nfunction removeLocalStorage() {\n    btnAddEl.classList.remove('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    const arrLs = JSON.parse(dataJson);\n    let i = arrLs.indexOf(book_Id);\n    arrLs.splice(i, 1);\n    localStorage.removeItem('orderedBookID')\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    countShoppingBook(arrLs)\n};\n\n"],"names":["parcelRequire","$2shzp","$77ff76f5a45d7283$export$30ca5a2b0dd6dd8d","BASE_URL","getBookById","book_Id","default","get","this","getTopBooks","getCategoryList","getBooksByCategory","category","$cafcf47cefdc4168$export$ea014c4bbf7776ad","string","value","length","Number","str","subStr","step","count","helpStr","pos","indexOf","slice","$cafcf47cefdc4168$var$subStrCount","$cafcf47cefdc4168$export$9766e02b415b9ef1","arrWord","split","splice","join","$b05efa7c4b0aa6bf$var$fetchBooks","$b05efa7c4b0aa6bf$var$categoryListBox","document","querySelector","$b05efa7c4b0aa6bf$var$booksBox","$b05efa7c4b0aa6bf$var$loader1","$b05efa7c4b0aa6bf$var$loader2","$b05efa7c4b0aa6bf$var$btnScroll","$b05efa7c4b0aa6bf$var$createBestSellersBooksMarcup","data","querty","map","list_name","books","titleBook","_id","book_image","title","author","$b05efa7c4b0aa6bf$var$createBooksOfCategoryMarcup","markup","async","$b05efa7c4b0aa6bf$var$showBestSellersBooks","classList","remove","$7Y9D8","Notify","failure","error","console","timeout","$b05efa7c4b0aa6bf$var$fetchBestSellersBooks","pageWidth","documentElement","scrollWidth","innerHTML","add","$b05efa7c4b0aa6bf$var$showBooksOfCategory","target","contains","id","$b05efa7c4b0aa6bf$var$fetchBooksOfCategory","$b05efa7c4b0aa6bf$var$scrollUp","window","scrollTo","top","behavior","$b05efa7c4b0aa6bf$var$fetchCategoryList","categoryListHTML","forEach","categoryLink","$b05efa7c4b0aa6bf$var$createCategoryListMarkup","$b05efa7c4b0aa6bf$var$showCategoryList","addEventListener","event","preventDefault","offset","scrollY","pageYOffSet","highDocument","clientHeight","$2092355dfbe39e27$var$books","$2092355dfbe39e27$var$book_Id","$2092355dfbe39e27$var$divContainerEl","$2092355dfbe39e27$var$divBackEl","$2092355dfbe39e27$var$btnCloseModal","$2092355dfbe39e27$var$btnAddEl","$2092355dfbe39e27$var$btnRemoveEl","$2092355dfbe39e27$var$textEl","$2092355dfbe39e27$var$objScroll","scrollPosition","disabledScroll","body","style","cssText","enabledScroll","scroll","$2092355dfbe39e27$var$createModalWindow","book_Id1","key","$2092355dfbe39e27$var$onCloseModal","once","respons","description","buy_links","randerBox","nameBookEl","authorEl","descriptionEl","amazonEl","appleEl","barnesEl","randerModal","textContent","attributes","url","toggle","dataJson","localStorage","getItem","arrLs","JSON","parse","includes","parentElement","dataset","push","setItem","stringify","$bUb57","countShoppingBook","i","removeItem","$1f0dc3b9307be026$var$homeLinkEl","$1f0dc3b9307be026$var$mobileHomeLinkEl"],"version":3,"file":"index.a990d614.js.map"}