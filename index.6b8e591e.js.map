{"mappings":"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","sources":["src/index.js","src/js/books.js","src/js/loader.js","src/js/help_functions.js","src/js/book_modal_window.js"],"sourcesContent":["import './js/isChangeTheme';\nimport './js/support_ukraine';\nimport './js/books';\nimport './js/autorization_modal_window';\nimport './js/book_modal_window';\nimport './js/mobile_menu';\nimport './js/about_us_modal_window';\n\n\nconst homeLinkEl = document.querySelector('.js-nav-homelink');\nconst mobileHomeLinkEl = document.querySelector('.js-mobile-nav-homelink');\nhomeLinkEl.classList.toggle('selected');\nmobileHomeLinkEl.classList.toggle('mobile-selected');\n\n\n\n","import { booksAPI } from './booksAPI';\nimport {shortTitle, createLoader, createBooksBoxTitle, changeActiveItem} from './help_functions';\nconst fetchBooks = new booksAPI();\n\nconst categoryListBox = document.querySelector(\".category-list-box\");\ncategoryListBox.addEventListener('click', showBooksOfCategory);\nconst booksBox = document.querySelector(\".books-box\");\nconst scrollUpBtn = document.querySelector('.btn-up-scroll');\n\nlet categoryList, itemAllCategories, abortCtrl1;\nlet firstLoading = true;\n\nscrollUpBtn.addEventListener('click', ()=>{\n    scrollUp(); \n    scrollUpBtn.classList.add('is-hidden-btn');\n});\n\nwindow.addEventListener('scroll', scrollTracker);\n\n\nshowCategoryList();  \nscrollUp(); \n\n// ФУНКЦІЇ виводу даних на сайт ----------------------------------------------------------------------------------\n\n        // Відправлення запиту і формування списку під час завантаження сторінки \n    async function showCategoryList() {\n\n        //створюємо заголовок All categories і відразу натискаємо на нього, щоб визвати завантаження Best Sellers Books\n        itemAllCategories = document.createElement(\"h3\");\n        itemAllCategories.textContent = \"All categories\"\n        itemAllCategories.classList.add(\"category-list-item\", \"active\");\n        itemAllCategories.setAttribute(\"id\",\"all-categories-item\");\n        categoryListBox.prepend(itemAllCategories);\n        itemAllCategories.click();\n\n        //створюємо loader\n        const loader1 = createLoader(itemAllCategories);\n        \n        //завантажуємо з сервера список категорій книжок\n        const data = await fetchCategoryList();\n\n        //якщо отримали непусті дані, то малюємо розмітку\n        if (data.length) {\n\n            categoryList = document.createElement(\"ul\");\n            itemAllCategories.after(categoryList);\n            \n            categoryList.classList.add(\"category-list\");\n            categoryList.innerHTML = createCategoryListMarkup(data);\n            categoryListBox.classList.add(\"category-list-box-not-empty\");\n        }\n\n        //видаляємо loader після виконання запиту\n        loader1.remove(); \n    };\n\n        // Обробка події натискання категорії в меню категорій книжок (відправлення запиту і формування списку книг категорії)\n    async function showBooksOfCategory({target}){\n        \n        //відміна попереднього запиту best-books або category-books\n        if (abortCtrl1) {\n            abortCtrl1.abort();\n            console.log(\"abort previous books fetch\");\n        }\n\n        if ((!target.classList.contains('category-list-item')) && (!target.classList.contains('js-btn-more'))){\n            return;\n        } else {\n\n            // переносимо клас .active на обрану категорію\n            changeActiveItem(itemAllCategories, categoryList, target);\n\n            //формуємо категорію в потрібному форматі для запиту на сервер\n            const category = target.id.split(\" \").join(\"%20\");\n            \n            //якщо оано пункт All categories, то формуємо список Best Sellers Books, якщо обрано іншу категорію, то формуємо список книжок для цієї категорії\n            if (category === 'all-categories-item') {\n\n                booksBox.innerHTML=\"\";\n                const booksBoxTitle = createBooksBoxTitle(booksBox, \"Best Sellers Books\");\n\n                // if (!firstLoading) { \n                //     scrollToBooksBox();\n                // }\n\n                const loader2 = createLoader(booksBoxTitle);\n\n                abortCtrl1 = new AbortController();\n                const data = await fetchBestSellersBooks(abortCtrl1);\n        \n                loader2.remove();\n        \n                if (data.length) {\n        \n                    const bestBooksList = document.createElement(\"ul\");\n                    bestBooksList.classList.add(\"list\",\"best-books-list\");\n                    booksBoxTitle.after(bestBooksList);\n                    bestBooksList.addEventListener('click', seeMore);\n        \n                    const pageWidth = document.documentElement.scrollWidth;\n        \n                    if (pageWidth < 768) {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 1);\n                    } else if (pageWidth < 1440 && pageWidth >= 768) {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 3);\n                    } else {\n                        bestBooksList.innerHTML = createBestSellersBooksMarcup(data, 5);\n                    }\n\n                    // if (!firstLoading) {\n                    //     scrollToBooksBox();\n                    // }else {\n                    //     firstLoading = false;\n                    // }\n                }\n            } else {\n                         \n                booksBox.innerHTML=\"\";\n                \n                const booksBoxTitle = createBooksBoxTitle(booksBox, target.id);\n\n//                scrollToBooksBox();\n\n                const loader2 = createLoader(booksBoxTitle);\n                \n                abortCtrl1 = new AbortController();\n                const data  = await fetchBooksOfCategory(category, abortCtrl1);\n                \n                loader2.remove();\n\n                if (data.length) {\n\n                    const categoryBooksList = document.createElement(\"ul\");\n                    booksBoxTitle.after(categoryBooksList);\n                    categoryBooksList.classList.add(\"list\", \"category-books-list\");\n\n                    const pageWidth = document.documentElement.scrollWidth;\n\n                    if (pageWidth < 768) {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 1);\n                    } else if (pageWidth < 1440 && pageWidth >= 768) {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 3);\n                    } else {\n                        categoryBooksList.innerHTML = createBooksOfCategoryMarcup(data, 5);\n                    }\n//                    scrollToBooksBox();\n\n                }\n            }\n        }\n    }\n\n        //Обробка події натискання кнопки seeMore\n    async function seeMore(event) {\n    \n        event.preventDefault();\n            \n        const { target } = event;\n                \n        if(!target.classList.contains('js-btn-more')) { return; }\n\n        showBooksOfCategory(event);\n    }\n    \n\n\n// ФУНКЦІЇ завантаження даних з бекенду -------------------------------------------------------------------------\n        \n        // Функція запиту на отримання назв категорій від бекенду\n    async function fetchCategoryList() {\n        try {\n            const { data } = await fetchBooks.getCategoryList();\n            if (!data.length) { \n                return Notify.failure(\"Can't find list of categories on the server. Please reload the page!\"); \n            }\n            return data;\n        }\n        catch (error) {\n            if (error.code !== 'ERR_CANCELED'){\n                \n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                itemAllCategories.after(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n            }\n           return [];\n        } \n    }\n        // Функція запиту на отримання списку найкращіх книжок від бекенду\n    async function fetchBestSellersBooks(abortCtrl1) {\n\n        try {\n            const { data } = await fetchBooks.getTopBooks(abortCtrl1);\n            if (!data.length) { return Notify.failure(\"Can't find best sellers books on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error){\n            if (error.code !== 'ERR_CANCELED'){\n\n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                booksBox.append(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n\n            }\n            return [];\n        }\n    }\n        // Функція запиту на отримання списку книг однієї категорії від бекенду\n    async function fetchBooksOfCategory(category, abortCtrl1) {\n        try {\n\n            const { data } = await fetchBooks.getBooksByCategory(category, abortCtrl1);\n            if (!data.length) { return Notify.failure(\"Can't find books of category <\" + category + \"> on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error) {\n            if (error.code !== 'ERR_CANCELED'){\n\n                console.error(error);\n\n                const errorBox = document.createElement(\"div\");\n                booksBox.append(errorBox);\n                errorBox.classList.add(\"error-box\");\n                errorBox.innerHTML = `<p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>`;\n\n            }\n            return [];\n        } \n    }\n\n\n\n// ФУНКЦІЇ формування розмітки -----------------------------------------------------------------------------------\n\n        // розмітка списку категорій\n    function createCategoryListMarkup(data) {\n\n        let categoryListHTML = \"\";\n\n        data.forEach(category => {\n            const categoryLink = `  <li id=\"${category.list_name}\" class=\"category-list-item\"> \n                                       ${category.list_name}\n                                    </li> `;\n            categoryListHTML += categoryLink;\n        });\n\n        return categoryListHTML;\n    };\n        // розмітка best sellers books\n    function createBestSellersBooksMarcup(data, querty) {\n\n        const markup = data.map(({list_name, books}) => {\n            const category = `<p class=\"theme-book\">${list_name}</p>`;\n\n            if (books.length) {\n                let booksOfCategory = books.splice(0, querty).map(({_id, book_image, title, author}) => \n                `<li class=\"item-book\" data-id=\"${_id}\">\n                    <div class=\"img-owerlay\">\n                        <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book\">\n                        <div class=\"owerlay\">\n                            <p class=\"owerlay-content\">quick view</p>\n                        </div>\n                    </div>\n                    <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                    <p class=\"title-author\">${shortTitle(author, 34)}</p>\n                </li>`).join('');\n\n                return `<li class=\"best-book-container\">${category}\n                            <ul class=\"list-books\">${booksOfCategory}</ul>\n                            <button type=\"button\" class=\"button-more js-btn-more\" id=\"${list_name}\">See more</button>\n                        </li>`\n            } else {\n                return `<li class=\"off-books best-book-container\">${category}\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </li>`\n            }}).join('');\n\n            return markup;\n    }\n        // розмітка books of category\n    function createBooksOfCategoryMarcup(data, querty) {\n\n        if(data.length){\n            const markup = data.map(({_id, book_image, author, title}) => \n            `<li class=\"item-book\" data-id=\"${_id}\">  \n                <div class=\"img-owerlay\">\n                    <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book\">\n                    <div class=\"owerlay\">\n                        <p class=\"owerlay-content\">quick view</p>\n                    </div>\n                </div>\n                <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                <p class=\"title-author\">${shortTitle(author, 34)}</p>\n            </li>`\n            ).join('')\n\n            return markup;\n        } else {\n                return `<liv class=\"off-books\">\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </li>`\n        }\n    }\n\n\n\n// ФУНКЦІЇ Допоміжні --------------------------------------------------------------------------------------------\n\n        // Функція скролу на початок сторінки\n    function scrollUp() {\n        \n        window.scrollTo({\n            top: 0,\n            behavior: 'smooth'\n        });\n        console.log(window.scrollY);\n\n        //scrollUpBtn.classList.add('is-hidden-btn');        \n    }\n\n        // Функція показу кнопки повернення на початок сторінки\n    function scrollTracker() {\n        const offset = window.scrollY || window.pageYOffSet;\n        const highDocument = document.documentElement.clientHeight;\n        if (offset > highDocument) {\n            scrollUpBtn.classList.remove('is-hidden-btn');\n        } else {\n            scrollUpBtn.classList.add('is-hidden-btn');\n        }\n    }\n\n        // Функція скролу до заголовку списку книжок\n    function scrollToBooksBox(){\n\n        titleTopY = booksBox.offsetTop;\n        docHeight = document.documentElement.offsetHeight;\n        windowHeight = document.documentElement.clientHeight;\n        docWidth =  document.documentElement.offsetWidth;\n        docCurrentScrollY = window.scrollY;\n\n        switch (docWidth >= 1440) {\n            case true :\n                if (docCurrentScrollY > 0) { \n                    window.scroll({top: booksBox.offsetTop - 112 , left: 0, behavior: \"smooth\",});\n                }\n                break;\n            case false :\n                if ((docHeight - titleTopY) < windowHeight){\n                    window.scroll({top: docHeight , left: 0, behavior: \"smooth\",});                    \n                }else if (titleTopY + 180 > windowHeight) {\n                    window.scroll({top: booksBox.offsetTop - 90 , left: 0, behavior: \"smooth\",});\n                }\n                break;\n            default:\n                break;\n        }\n\n    }","export default loaderHTML = `<div class=\"loader\">\n\n                            <div class=\"inner\">\n\n                                <div class=\"top\">\n                                    <div class=\"left-top\"></div>\n                                    <div class=\"right-top\"></div>\n                                </div>\n\n                                <div class=\"bottom\">\n                                    <div class=\"left-bottom\"></div>\n                                    <div class=\"middle\"></div>\n                                    <div class=\"right-bottom\"></div>\n                                </div>\n\n                            </div>\n\n                            <p class=\"text\">Loading...</p>\n                            \n                            <ul>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                <li></li>\n                                \n                            </ul>  \n\n                            </div>`","import loaderHTML from './loader';\n\n// Функція що скорочує рядок string до довжини value та додає три крапки в кінці\nfunction shortTitle(string, value) {\n  if(string.length > Number(value)){\n      switch (subStrCount(string, \" \")){\n        case 0: return string.slice(0, Number(value-2)) + '...';\n        case 1:  return string.slice(0, Number(value-1)) + '...';\n        default: return string.slice(0, Number(value-2)) + '...';\n      }\n  }else{\n      return string;\n  }\n}\n\n// Функція, яка підраховує кількість входжень рядка subStr в str\nfunction subStrCount(str, subStr){\n\n  const step = subStr.length;\n  let count = 0;\n  let helpStr = str;\n  let pos = str.indexOf(subStr);\n  \n  while (pos >= 0){\n    count = count + 1;\n    helpStr = helpStr.slice(pos+step);\n    pos = helpStr.indexOf(subStr);\n  }\n  return count;  \n}\n  \n// Функція що робить синім кольором останнє слово в рядку string\nfunction lastBlueWord(string) {\n    const arrWord = string.split(\" \");\n    const firstWord = arrWord.splice(0, arrWord.length - 1);\n    return `${firstWord.join(' ')} <span class=\"last-word-color\">${arrWord.join('')}</span>`\n}\n\n//Функція створює та повертає loader, який додає в документ після елементу elementAfter\nfunction createLoader(elementAfter){\n        const loader = document.createElement(\"div\");\n        loader.classList.add(\"loader-box\");\n        loader.innerHTML = loaderHTML;\n        elementAfter.after(loader);\n        return loader;\n}\n\n//Функція перезаписує клас .active в меню list, включаючи елемент headerElement\nfunction changeActiveItem(headerElement, list, checkedElement){\n\n  if ((headerElement.innerText === checkedElement.innerText) && (!headerElement.classList.contains(\"active\"))){ \n    headerElement.classList.add(\"active\");\n  } else if ((headerElement.innerText != checkedElement.innerText) && (headerElement.classList.contains(\"active\"))) {\n    headerElement.classList.remove(\"active\");\n  }\n\n  if (list){\n    Array.from(list.children).forEach((item) => { \n      if ((item.innerText != checkedElement.innerText) && item.classList.contains(\"active\")) {\n          item.classList.remove(\"active\");\n      } else if (item.innerText === checkedElement.innerText) {\n          item.classList.add(\"active\");\n      }\n    });\n  }\n}\n\n//Функція створює заголовок h2 в контейнері box з текстом titleStr і робить останє столово блакитним\nfunction createBooksBoxTitle(box, titleStr){\n  const title = document.createElement(\"h2\");\n  title.classList.add(\"title-theme-book\");\n  title.innerHTML = `${lastBlueWord(titleStr)}`;\n  box.prepend(title);\n  return title;\n}\n\n\nexport {shortTitle, lastBlueWord, createLoader, changeActiveItem,  createBooksBoxTitle};","import { booksAPI } from './booksAPI';\nimport { countShoppingBook } from './header';\n\nconst books = new booksAPI;\nlet book_Id;\nconst divContainerEl = document.querySelector('.books-box');\nconst divBackEl = document.querySelector('.back');\nconst btnCloseModal = document.querySelector('.btn-modal-close');\nconst btnAddEl = document.querySelector('.add');\nconst btnRemoveEl = document.querySelector('.remove');\nconst textEl = document.querySelector('.modal-message');\n\nconst objScroll = {\n    scrollPosition: 0,\n    disabledScroll() {\n        objScroll.scrollPosition = window.scrollY;\n        document.body.classList.add('block-scroll');\n\n        document.body.style.cssText = `top: -${objScroll.scrollPosition}px;`\n    },\n\n    enabledScroll() {\n        document.body.classList.remove('block-scroll');\n        document.body.style.cssText = `top: 0`\n        window.scroll({top: objScroll.scrollPosition})\n    },\n}\n\ndivContainerEl.addEventListener('click', onReadId);\n\nfunction onReadId(event) {\n    \n    if (event.target.classList[0] === 'img-book' || event.target.classList[0] === 'owerlay') {\n        book_Id = event.target.parentElement.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    } else if (event.target.classList[0] === 'owerlay-content') {\n        book_Id = event.target.parentElement.parentElement.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    } else if (event.target.classList[0] === 'title-book' || event.target.classList[0] === 'author') {\n        book_Id = event.target.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    }\n}\n\nasync function createModalWindow(book_Id) {\n    objScroll.disabledScroll();\n    document.addEventListener(\"keydown\", event => {\n        if (event.key === 'Escape') {\n            onCloseModal();\n        }\n    }, {once: true} );\n    try {\n        const respons = await books.getBookById(book_Id);\n        const { author, book_image, description, title, buy_links } = respons.data;\n        const randerBox = document.querySelector('.book-img');\n        const nameBookEl = document.querySelector('#name-book');\n        const authorEl = document.querySelector('#author');\n        const descriptionEl = document.querySelector('#description');\n        const amazonEl = document.querySelector('#amazon');\n        const appleEl = document.querySelector('#apple');\n        const barnesEl = document.querySelector('#barnes');\n        randerBox.innerHTML = '';\n        const randerModal = `<img src=\"${book_image}\" alt=\"${book_image}\" class=\"img-modal\">`\n        nameBookEl.textContent = title;\n        authorEl.textContent = author;\n        if (description === '') {\n            descriptionEl.textContent = 'No description';\n        } else {\n            descriptionEl.textContent = description\n        }\n        \n        amazonEl.attributes[0].value = buy_links[0].url;\n        appleEl.attributes[0].value = buy_links[1].url;\n        barnesEl.attributes[0].value = buy_links[2].url;\n\n        randerBox.innerHTML = randerModal;\n        divBackEl.classList.toggle('is-hidden');\n        const dataJson = localStorage.getItem('orderedBookID');\n        const arrLs = JSON.parse(dataJson);\n        if (arrLs === null || !arrLs.includes(book_Id)) {\n            btnAddEl.classList.remove('is-hidden');\n        } else {\n            btnRemoveEl.classList.remove('is-hidden');\n            textEl.classList.remove('is-hidden');\n        }\n    } catch (error) {\n        console.error(error);\n        Notify.failure('Sorry, there was a server error, please reload the page');\n    }\n    \n};\n\nbtnCloseModal.addEventListener('click', onCloseModal);\n\nfunction onCloseModal() {\n    objScroll.enabledScroll();\n    divBackEl.classList.toggle('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    btnAddEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n}\n\nbtnAddEl.addEventListener('click', addLocalStorage);\nbtnRemoveEl.addEventListener('click', removeLocalStorage);\n\nfunction addLocalStorage() {\n    btnAddEl.classList.add('is-hidden');\n    btnRemoveEl.classList.remove('is-hidden');\n    textEl.classList.remove('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    let arrLs = JSON.parse(dataJson); //book_Id\n    /* console.log(arrLs) */\n    if (arrLs === null) {\n        arrLs = [];\n    }\n    arrLs.push(book_Id);\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    countShoppingBook(arrLs)\n};\n\nfunction removeLocalStorage() {\n    btnAddEl.classList.remove('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    const arrLs = JSON.parse(dataJson);\n    let i = arrLs.indexOf(book_Id);\n    arrLs.splice(i, 1);\n    localStorage.removeItem('orderedBookID')\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    countShoppingBook(arrLs)\n};\n\n"],"names":["parcelRequire","$bpxeT","$03da642c15b09e5e$export$2e2bcd8739ae039","loaderHTML","$02f93218786be7b6$export$ea014c4bbf7776ad","string","value","length","Number","str","subStr","step","count","helpStr","pos","indexOf","slice","$02f93218786be7b6$var$subStrCount","$02f93218786be7b6$export$8e84ca9bef6adc3a","elementAfter","loader","document","createElement","classList","add","innerHTML","after","$02f93218786be7b6$export$fe21ae094c287a07","headerElement","list","checkedElement","innerText","contains","remove","Array","from","children","forEach","item","$02f93218786be7b6$export$9738762120ff3115","box","titleStr","arrWord","firstWord","title","concat","split","splice","join","prepend","$f07733ea329a6322$var$fetchBooks","$3w7gl","booksAPI","$f07733ea329a6322$var$categoryListBox","querySelector","addEventListener","$f07733ea329a6322$var$showBooksOfCategory","$f07733ea329a6322$var$categoryList","$f07733ea329a6322$var$itemAllCategories","$f07733ea329a6322$var$abortCtrl1","$f07733ea329a6322$var$booksBox","$f07733ea329a6322$var$scrollUpBtn","$f07733ea329a6322$var$_showCategoryList","$parcel$interopDefault","$2TvXO","mark","_callee","loader1","data","textContent","setAttribute","click","$f07733ea329a6322$var$fetchCategoryList","_ctx","sent","$f07733ea329a6322$var$createCategoryListMarkup","apply","this","arguments","_","$f07733ea329a6322$var$_showBooksOfCategory","param","target","category","booksBoxTitle","loader2","bestBooksList","pageWidth","booksBoxTitle1","loader21","data1","categoryBooksList","pageWidth1","abort","console","log","id","AbortController","$f07733ea329a6322$var$fetchBestSellersBooks","$f07733ea329a6322$var$seeMore","documentElement","scrollWidth","$f07733ea329a6322$var$createBestSellersBooksMarcup","$f07733ea329a6322$var$fetchBooksOfCategory","$f07733ea329a6322$var$createBooksOfCategoryMarcup","event","$f07733ea329a6322$var$_seeMore","preventDefault","$f07733ea329a6322$var$_fetchCategoryList","errorBox","getCategoryList","Notify","failure","t0","code","error","abortCtrl11","$f07733ea329a6322$var$_fetchBestSellersBooks","getTopBooks","append","abortCtrl12","$f07733ea329a6322$var$_fetchBooksOfCategory","getBooksByCategory","categoryListHTML","categoryLink","list_name","querty","map","param1","books","booksOfCategory","_id","book_image","author","$f07733ea329a6322$var$scrollUp","window","scrollTo","top","behavior","scrollY","offset","pageYOffSet","highDocument","clientHeight","$f07733ea329a6322$var$showCategoryList","$dc327292a98b2944$var$book_Id","$dc327292a98b2944$var$books","$dc327292a98b2944$var$divContainerEl","$dc327292a98b2944$var$divBackEl","$dc327292a98b2944$var$btnCloseModal","$dc327292a98b2944$var$btnAddEl","$dc327292a98b2944$var$btnRemoveEl","$dc327292a98b2944$var$textEl","$dc327292a98b2944$var$objScroll","scrollPosition","disabledScroll","body","style","cssText","enabledScroll","scroll","$dc327292a98b2944$var$createModalWindow","book_Id1","$dc327292a98b2944$var$_createModalWindow","respons","_data","description","buy_links","randerBox","nameBookEl","authorEl","descriptionEl","amazonEl","appleEl","barnesEl","randerModal","dataJson","arrLs","key","$dc327292a98b2944$var$onCloseModal","once","getBookById","attributes","url","toggle","localStorage","getItem","JSON","parse","includes","parentElement","dataset","push","setItem","stringify","$i8Q71","countShoppingBook","i","removeItem","$b8f9b7833fa37166$var$homeLinkEl","$b8f9b7833fa37166$var$mobileHomeLinkEl"],"version":3,"file":"index.6b8e591e.js.map"}