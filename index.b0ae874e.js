!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequire3984;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire3984=o),o("ILISp"),o("aEag2");var a=o("bpxeT"),s=o("2TvXO"),c=o("3w7gl");function i(e,t){if(!(e.length>Number(t)))return e;switch(function(e,t){var r=t.length,n=0,o=e,a=e.indexOf(t);for(;a>=0;)n+=1,a=(o=o.slice(a+r)).indexOf(t);return n}(e," ")){case 0:default:return e.slice(0,Number(t-2))+"...";case 1:return e.slice(0,Number(t-1))+"..."}}function l(e){var t=e.split(" "),r=t.splice(0,t.length-1);return"".concat(r.join(" "),' <span class="last-word-color">').concat(t.join(""),"</span>")}var u=o("6JpON"),d=new(0,c.booksAPI),p=document.querySelector(".category-list-box"),f=document.querySelector(".category-list"),m=p.querySelector(".loader"),h=document.querySelector(".books-box"),b=h.querySelector(".title-theme-book"),v=document.querySelector(".books-list"),y=h.querySelector(".loader"),g=document.querySelector(".btn-up-scroll");function k(){return w.apply(this,arguments)}function w(){return(w=e(a)(e(s).mark((function t(){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.getCategoryList();case 3:if((r=e.sent.data).length){e.next=6;break}return e.abrupt("return",u.Notify.failure("Can't find list of categories on the server. Please reload the page!"));case 6:return e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),u.Notify.failure("Sorry, there was a server error, please reload the page",{timeout:3e3}),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function L(){return S.apply(this,arguments)}function S(){return(S=e(a)(e(s).mark((function t(){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.getTopBooks();case 3:if((r=e.sent.data).length){e.next=6;break}return e.abrupt("return",u.Notify.failure("Can't find best sellers books on the server. Please reload the page!"));case 6:return e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),u.Notify.failure("Sorry, there was a server error, please reload the page",{timeout:3e3}),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function x(e){return q.apply(this,arguments)}function q(){return(q=e(a)(e(s).mark((function t(r){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.getBooksByCategory(r);case 3:if((n=e.sent.data).length){e.next=6;break}return e.abrupt("return",u.Notify.failure("Can't find books of category <"+r+"> on the server. Please reload the page!"));case 6:return e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),u.Notify.failure("Sorry, there was a server error, please reload the page"),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function E(e){var t="";return e.forEach((function(e){var r='<li id="'.concat(e.list_name,'" class="category-list-item">').concat(e.list_name,"</li>");t+=r})),t}function N(e,t){return e.map((function(e){var r=e.list_name,n=e.books,o='<p class="theme-book">'.concat(r,"</p>");if(n.length){var a=n.splice(0,t).map((function(e){var t=e._id,r=e.book_image,n=e.title,o=e.author;return'<li class="item-book" data-id="'.concat(t,'">\n                    <div class="img-owerlay">\n                        <img src="').concat(r,'" alt="').concat(n,'" class="img-book">\n                        <div class="owerlay">\n                            <p class="owerlay-content">quick view</p>\n                        </div>\n                    </div>\n                    <p class="title-book">').concat(i(n,17),'</p>\n                    <p class="author">').concat(i(o,34),"</p>\n                </li>")})).join("");return'<li class="best-book-container">'.concat(o,'\n                            <ul class="list-books">').concat(a,'</ul>\n                            <button type="button" class="button-more js-btn-more" id="').concat(r,'">See more</button>\n                        </li>')}return'<li class="off-books best-book-container">'.concat(o,'\n                            <p class="off-books-text">Sorry, there are no books in this category, please choose another category</p>\n                        </li>')})).join("")}function T(e,t){return e.length?e.map((function(e){var t=e._id,r=e.book_image,n=e.author,o=e.title;return'<li class="item-book" data-id="'.concat(t,'">\n                <div class="img-owerlay">\n                    <img src="').concat(r,'" alt="').concat(o,'" class="img-book">\n                    <div class="owerlay">\n                        <p class="owerlay-content">quick view</p>\n                    </div>\n                </div>\n                <p class="title-book">').concat(i(o,17),'</p>\n                <p class="author">').concat(i(n,34),"</p>\n            </li>")})).join(""):'<liv class="off-books">\n                            <p class="off-books-text">Sorry, there are no books in this category, please choose another category</p>\n                        </li>'}function I(){return(I=e(a)(e(s).mark((function t(){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.classList.remove("loader-non-active"),e.next=3,k();case 3:(r=e.sent).length&&(f.innerHTML=E(r),p.classList.add("category-list-box-not-empty")),m.classList.add("loader-non-active");case 6:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function B(){return O.apply(this,arguments)}function O(){return(O=e(a)(e(s).mark((function t(){var r,n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.innerHTML="".concat(l("Best Sellers Books")),v.innerHTML="",y.classList.remove("loader-non-active"),e.next=5,L();case 5:(r=e.sent).length&&(n=document.documentElement.scrollWidth,v.innerHTML=N(r,n<768?1:n<1440&&n>=768?3:5)),y.classList.add("loader-non-active");case 8:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function _(e){return j.apply(this,arguments)}function j(){return(j=e(a)(e(s).mark((function t(r){var n,o,a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=r.target).classList.contains("category-list-item")||n.classList.contains("js-btn-more")){e.next=5;break}return e.abrupt("return");case 5:if("category-list-title"!==(o=n.id.split(" ").join("%20"))){e.next=10;break}B(),e.next=24;break;case 10:return b.innerHTML="".concat(l(n.id)),v.innerHTML="",y.classList.remove("loader-non-active"),e.next=15,x(o);case 15:if(!(a=e.sent).length){e.next=20;break}document.documentElement.scrollWidth,v.innerHTML=T(a),e.next=22;break;case 20:return u.Notify.failure("Sorry, there was a server error, please reload the page"),e.abrupt("return");case 22:y.classList.add("loader-non-active"),H();case 24:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=e(a)(e(s).mark((function t(r){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=r.target,e.prev=2,n.classList.contains("js-btn-more")){e.next=7;break}return e.abrupt("return");case 7:_(r),H();case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),u.Notify.failure("Sorry, there was a server error, please reload the page");case 14:case"end":return e.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}function H(){window.scrollTo({top:0,behavior:"smooth"}),g.classList.add("is-hidden-btn")}!function(){I.apply(this,arguments)}(),B(),p.addEventListener("click",_),v.addEventListener("click",(function(e){return M.apply(this,arguments)})),g.addEventListener("click",H),window.addEventListener("scroll",(function(){var e=window.scrollY||window.pageYOffSet,t=document.documentElement.clientHeight;e>t?g.classList.remove("is-hidden-btn"):g.classList.add("is-hidden-btn")})),o("cIzEt");a=o("bpxeT"),s=o("2TvXO"),c=o("3w7gl");var C,D=o("i8Q71"),P=new(0,c.booksAPI),J=document.querySelector(".books-box"),Y=document.querySelector(".back"),z=document.querySelector(".btn-modal-close"),A=document.querySelector(".add"),R=document.querySelector(".remove"),U=document.querySelector(".modal-message"),W={scrollPosition:0,disabledScroll:function(){W.scrollPosition=window.scrollY,document.body.classList.add("block-scroll"),document.body.style.cssText="top: -".concat(W.scrollPosition,"px;")},enabledScroll:function(){document.body.classList.remove("block-scroll"),document.body.style.cssText="top: 0",window.scroll({top:W.scrollPosition})}};function X(e){return F.apply(this,arguments)}function F(){return(F=e(a)(e(s).mark((function t(r){var n,o,a,c,i,l,u,d,p,f,m,h,b,v,y,g,k;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W.disabledScroll(),document.addEventListener("keydown",(function(e){"Escape"===e.key&&Q()}),{once:!0}),e.prev=2,e.next=5,P.getBookById(r);case 5:n=e.sent,o=n.data,a=o.author,c=o.book_image,i=o.description,l=o.title,u=o.buy_links,d=document.querySelector(".book-img"),p=document.querySelector("#name-book"),f=document.querySelector("#author"),m=document.querySelector("#description"),h=document.querySelector("#amazon"),b=document.querySelector("#apple"),v=document.querySelector("#barnes"),d.innerHTML="",y='<img src="'.concat(c,'" alt="').concat(c,'" class="img-modal">'),p.textContent=l,f.textContent=a,m.textContent=""===i?"No description":i,h.attributes[0].value=u[0].url,b.attributes[0].value=u[1].url,v.attributes[0].value=u[2].url,d.innerHTML=y,Y.classList.toggle("is-hidden"),g=localStorage.getItem("orderedBookID"),null!==(k=JSON.parse(g))&&k.includes(r)?(R.classList.remove("is-hidden"),U.classList.remove("is-hidden")):A.classList.remove("is-hidden"),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(2),console.error(e.t0),Notify.failure("Sorry, there was a server error, please reload the page");case 33:case"end":return e.stop()}}),t,null,[[2,29]])})))).apply(this,arguments)}function Q(){W.enabledScroll(),Y.classList.toggle("is-hidden"),R.classList.add("is-hidden"),A.classList.add("is-hidden"),U.classList.add("is-hidden")}J.addEventListener("click",(function(e){"img-book"===e.target.classList[0]||"owerlay"===e.target.classList[0]?X(C=e.target.parentElement.parentElement.dataset.id):"owerlay-content"===e.target.classList[0]?X(C=e.target.parentElement.parentElement.parentElement.dataset.id):"title-book"!==e.target.classList[0]&&"author"!==e.target.classList[0]||X(C=e.target.parentElement.dataset.id)})),z.addEventListener("click",Q),A.addEventListener("click",(function(){A.classList.add("is-hidden"),R.classList.remove("is-hidden"),U.classList.remove("is-hidden");var e=localStorage.getItem("orderedBookID"),t=JSON.parse(e);null===t&&(t=[]);t.push(C),localStorage.setItem("orderedBookID",JSON.stringify(t)),(0,D.countShoppingBook)(t)})),R.addEventListener("click",(function(){A.classList.remove("is-hidden"),R.classList.add("is-hidden"),U.classList.add("is-hidden");var e=localStorage.getItem("orderedBookID"),t=JSON.parse(e),r=t.indexOf(C);t.splice(r,1),localStorage.removeItem("orderedBookID"),localStorage.setItem("orderedBookID",JSON.stringify(t)),(0,D.countShoppingBook)(t)})),o("9haEe"),o("d474f");var G=document.querySelector(".js-nav-homelink"),K=document.querySelector(".js-mobile-nav-homelink");G.classList.toggle("selected"),K.classList.toggle("mobile-selected")}();
//# sourceMappingURL=index.b0ae874e.js.map
