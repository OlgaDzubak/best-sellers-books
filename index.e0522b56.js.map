{"mappings":"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","sources":["src/index.js","src/js/books.js","src/js/help_functions.js","src/js/book_modal_window.js"],"sourcesContent":["import './js/isChangeTheme';\n import './js/support_ukraine';\nimport './js/books';\nimport './js/autorization_modal_window';\nimport './js/book_modal_window';\nimport './js/mobile_menu';\nimport './js/about_us_modal_window';\n\n\nconst homeLinkEl = document.querySelector('.js-nav-homelink');\nconst mobileHomeLinkEl = document.querySelector('.js-mobile-nav-homelink');\nhomeLinkEl.classList.toggle('selected');\nmobileHomeLinkEl.classList.toggle('mobile-selected');\n\n\n\n","import { booksAPI } from './booksAPI';\nimport {shortTitle, lastBlueWord} from './help_functions';\n\nconst fetchBooks = new booksAPI();\n\nconst categoryListBox = document.querySelector(\".category-list-box\");\nconst categoryList = categoryListBox.querySelector(\".category-list\");\nconst itemAllCategories = categoryListBox.querySelector(\"#category-list-title\");\nconst loader1 =categoryListBox.querySelector(\".loader\");\n\nconst booksBox = document.querySelector(\".books-box\");\nconst booksBoxTitle = booksBox.querySelector(\".title-theme-book\");\nconst booksList = booksBox.querySelector(\".list\");\nconst loader2 = document.querySelector(\".books-box .loader\");\nconst btnScroll = booksBox.querySelector('.btn-up-scroll');     \n\nlet abortCtrl1, abortCtrl2, abortCtrl3;                         \n\nshowCategoryList();                                             \n\ncategoryListBox.addEventListener('click', showBooksOfCategory);  // слухач на меню категорій книжок\nitemAllCategories.click();                                       // клікаємо на пункт All Categories, щоб завантажити best sellers books\nbooksList.addEventListener('click', seeMore);                    // слухач на кнопку seeMore з блоку Best Sellers Books\nbtnScroll.addEventListener('click', scrollUp);                   // слухач на кнопку скролу на початок сторінки\nwindow.addEventListener('scroll', scrollTracker);                // слухач на подію скролу сторінки щоб своєчасно показати кнопку повернення на початок сторінки\n\n\n// функції завантаження даних з бекенду -------------------------------------------------------------------------\n        \n        // Функція запиту на отримання назв категорій від бекенду\n    async function fetchCategoryList(abortCtrl1) {\n        try {\n            const { data } = await fetchBooks.getCategoryList(abortCtrl1);\n            if (!data.length) { \n                return Notify.failure(\"Can't find list of categories on the server. Please reload the page!\"); \n            }\n            return data;\n        }\n        catch (error) {\n            if (error.code !== 'ERR_CANCELED'){\n                console.error(error);\n                categoryList.innerHTML = `<li class=\"error-box\">\n                                            <p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>\n                                          </li>`;\n            }\n           return [];\n        } \n    }\n        // Функція запиту на отримання списку найкращіх книжок від бекенду\n    async function fetchBestSellersBooks(abortCtrl2) {\n\n        try {\n            const { data } = await fetchBooks.getTopBooks(abortCtrl2);\n            if (!data.length) { return Notify.failure(\"Can't find best sellers books on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error){\n            if (error.code !== 'ERR_CANCELED'){\n                console.error(error);\n                booksList.innerHTML = `<li class=\"error-box\">\n                                            <p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>\n                                       </li>`;\n            }\n            return [];\n        }\n    }\n        // Функція запиту на отримання списку книг однієї категорії від бекенду\n    async function fetchBooksOfCategory(category, abortCtrl3) {\n        try {\n\n            const { data } = await fetchBooks.getBooksByCategory(category, abortCtrl3);\n            if (!data.length) { return Notify.failure(\"Can't find books of category <\" + category + \"> on the server. Please reload the page!\"); }\n            return data;\n        }\n        catch (error) {\n            if (error.code !== 'ERR_CANCELED'){\n                console.error(error);\n                booksList.innerHTML =  `<li class=\"error-box\">\n                                            <p class=\"error-box-text\">Sorry, there was a server error, please reload the page!!!</p>\n                                        </li>`;\n            }\n            return [];\n        } \n    }\n\n// функції формування розмітки -----------------------------------------------------------------------------------\n\n        // розмітка списку категорій\n    function createCategoryListMarkup(data) {\n\n        let categoryListHTML = \"\";\n\n        data.forEach(category => {\n            const categoryLink = `  <li id=\"${category.list_name}\" class=\"category-list-item\"> \n                                        ${category.list_name}\n                                    </li> `;\n            categoryListHTML += categoryLink;\n        });\n\n        return categoryListHTML;\n    };\n        // розмітка best sellers books\n    function createBestSellersBooksMarcup(data, querty) {\n\n        const markup = data.map(({list_name, books}) => {\n            const category = `<p class=\"theme-book\">${list_name}</p>`;\n\n            if (books.length) {\n                let booksOfCategory = books.splice(0, querty).map(({_id, book_image, title, author}) => \n                `<li class=\"item-book\" data-id=\"${_id}\">\n                    <div class=\"img-owerlay\">\n                        <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book\">\n                        <div class=\"owerlay\">\n                            <p class=\"owerlay-content\">quick view</p>\n                        </div>\n                    </div>\n                    <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                    <p class=\"author\">${shortTitle(author, 34)}</p>\n                </li>`).join('');\n\n                return `<li class=\"best-book-container\">${category}\n                            <ul class=\"list-books\">${booksOfCategory}</ul>\n                            <button type=\"button\" class=\"button-more js-btn-more\" id=\"${list_name}\">See more</button>\n                        </li>`\n            } else {\n                return `<li class=\"off-books best-book-container\">${category}\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </li>`\n            }}).join('');\n\n            return markup;\n    }\n        // розмітка books of category\n    function createBooksOfCategoryMarcup(data, querty) {\n\n        if(data.length){\n            const markup = data.map(({_id, book_image, author, title}) => \n            `<li class=\"item-book\" data-id=\"${_id}\">  \n                <div class=\"img-owerlay\">\n                    <img src=\"${book_image}\" alt=\"${title}\" class=\"img-book\">\n                    <div class=\"owerlay\">\n                        <p class=\"owerlay-content\">quick view</p>\n                    </div>\n                </div>\n                <p class=\"title-book\">${shortTitle(title, 17)}</p>\n                <p class=\"title-author\">${shortTitle(author, 34)}</p>\n            </li>`\n            ).join('')\n\n            return markup;\n        } else {\n                return `<liv class=\"off-books\">\n                            <p class=\"off-books-text\">Sorry, there are no books in this category, please choose another category</p>\n                        </li>`\n        }\n    }\n\n\n// функції виводу даних на сайт ----------------------------------------------------------------------------------\n\n        // Відправлення запиту і формування списку під час завантаження сторінки \n    async function showCategoryList() {\n        scrollUp();\n        if (abortCtrl1) {\n            abortCtrl1.abort();\n            console.log(\"abort showCategoryList\");\n        } \n\n        loader1.classList.remove('loader-non-active');\n        \n        abortCtrl1 = new AbortController();\n        const data = await fetchCategoryList(abortCtrl1);\n\n        if (data.length) {\n            categoryList.innerHTML = createCategoryListMarkup(data);\n            categoryListBox.classList.add(\"category-list-box-not-empty\");\n        }\n\n        loader1.classList.add('loader-non-active');\n    };\n        // Відправлення запиту і формування списку best sellers books \n    async function showBestSellersBooks(){\n        \n        if (abortCtrl2) {\n            abortCtrl2.abort();\n            console.log(\"abort showBestSellersBooks\");\n        } \n        \n        booksBoxTitle.innerHTML = `${lastBlueWord(\"Best Sellers Books\")}`;\n        booksList.innerHTML=\"\"\n        booksList.classList.remove(\"category-books-list\");\n        booksList.classList.add(\"best-books-list\");\n\n        loader2.classList.toggle(\"loader-non-active\");\n        abortCtrl2 = new AbortController();\n\n        const data = await fetchBestSellersBooks(abortCtrl2);\n\n        if (data.length) {\n            \n            const pageWidth = document.documentElement.scrollWidth;\n\n            if (pageWidth < 768) {\n                booksList.innerHTML = createBestSellersBooksMarcup(data, 1);\n            } else if (pageWidth < 1440 && pageWidth >= 768) {\n                booksList.innerHTML = createBestSellersBooksMarcup(data, 3);\n            } else {\n                booksList.innerHTML = createBestSellersBooksMarcup(data, 5);\n            }\n            \n        }\n\n        loader2.classList.toggle('loader-non-active');\n    }\n        // Відправлення запиту і формування списку книг однієї категорії \n    async function showBooksOfCategory({target}){\n\n        if ((!target.classList.contains('category-list-item')) && (!target.classList.contains('js-btn-more'))){\n            return;\n        } else {\n            \n            const category = target.id.split(\" \").join(\"%20\");\n            \n            if (category === 'category-list-title') {\n              //  scrollToTitle();\n                showBestSellersBooks();\n               // scrollToTitle();\n\n            } else {\n                          \n                if (abortCtrl3) {\n                    abortCtrl3.abort();\n                    console.log(\"abort showBooksOfCategory\");\n                }\n\n                booksBoxTitle.innerHTML = `${lastBlueWord(target.id)}`;\n                booksList.innerHTML=\"\"\n                \n                scrollToTitle();\n\n                booksList.classList.remove(\"best-books-list\");\n                booksList.classList.add(\"category-books-list\");\n\n                loader2.classList.toggle('loader-non-active');\n                \n                abortCtrl3 = new AbortController();\n                const data  = await fetchBooksOfCategory(category, abortCtrl3);\n\n                if (data.length) {\n\n                    const pageWidth = document.documentElement.scrollWidth;\n                    if (pageWidth < 768) {\n                        booksList.innerHTML = createBooksOfCategoryMarcup(data, 1);\n                    } else if (pageWidth < 1440 && pageWidth >= 768) {\n                        booksList.innerHTML = createBooksOfCategoryMarcup(data, 3);\n                    } else {\n                        booksList.innerHTML = createBooksOfCategoryMarcup(data, 5);\n                    }\n\n                }\n\n                loader2.classList.toggle('loader-non-active');\n            \n                scrollToTitle();\n            }\n            \n        }\n        \n    }\n\n\n// функції для кнопки see more та скролу на початок сторінки -----------------------------------------------------\n\n        //Функція для кнопки seeMore cписку книг однієї категорії\n    async function seeMore(event) {\n        \n        event.preventDefault();\n            \n        const { target } = event;\n                \n        try {\n            if(!target.classList.contains('js-btn-more')) { \n                return;\n            } else {\n                showBooksOfCategory(event);\n                scrollUp();\n            }\n        } catch (error) {\n\n            console.error(error);\n            Notify.failure('Sorry, there was a server error, please reload the page');\n\n        }\n    }\n        // Функція скролу на початок сторінки\n    function scrollUp() {\n        window.scrollTo({\n            top: 0,\n            behavior: 'smooth'\n        })\n\n        btnScroll.classList.add('is-hidden-btn')\n    }\n        // Функція показу кнопки повернення на початок сторінки\n    function scrollTracker() {\n        const offset = window.scrollY || window.pageYOffSet;\n        const highDocument = document.documentElement.clientHeight;\n        if (offset > highDocument) {\n            btnScroll.classList.remove('is-hidden-btn');\n        } else {\n            btnScroll.classList.add('is-hidden-btn');\n        }\n    }\n\n    function scrollToTitle(){\n        window.scroll({\n            top: booksBoxTitle.offsetTop ,\n            left: 0,\n            behavior: \"smooth\",\n          });\n    }","// Функція що скорочує рядок string до довжини value та додає три крапки в кінці\nfunction shortTitle(string, value) {\n  if(string.length > Number(value)){\n      switch (subStrCount(string, \" \")){\n        case 0: return string.slice(0, Number(value-2)) + '...';\n        case 1:  return string.slice(0, Number(value-1)) + '...';\n        default: return string.slice(0, Number(value-2)) + '...';\n      }\n  }else{\n      return string;\n  }\n}\n\n// Функція, яка підраховує кількість входжень рядка subStr в str\nfunction subStrCount(str, subStr){\n\n  const step = subStr.length;\n  let count = 0;\n  let helpStr = str;\n  let pos = str.indexOf(subStr);\n  \n  while (pos >= 0){\n    count = count + 1;\n    helpStr = helpStr.slice(pos+step);\n    pos = helpStr.indexOf(subStr);\n  }\n  return count;  \n}\n  \n// Функція що робить синім кольором останнє слово в рядку string\nfunction lastBlueWord(string) {\n    const arrWord = string.split(\" \");\n    const firstWord = arrWord.splice(0, arrWord.length - 1);\n    return `${firstWord.join(' ')} <span class=\"last-word-color\">${arrWord.join('')}</span>`\n}\n\nexport {shortTitle, lastBlueWord};","import { booksAPI } from './booksAPI';\nimport { countShoppingBook } from './header';\n\nconst books = new booksAPI;\nlet book_Id;\nconst divContainerEl = document.querySelector('.books-box');\nconst divBackEl = document.querySelector('.back');\nconst btnCloseModal = document.querySelector('.btn-modal-close');\nconst btnAddEl = document.querySelector('.add');\nconst btnRemoveEl = document.querySelector('.remove');\nconst textEl = document.querySelector('.modal-message');\n\nconst objScroll = {\n    scrollPosition: 0,\n    disabledScroll() {\n        objScroll.scrollPosition = window.scrollY;\n        document.body.classList.add('block-scroll');\n\n        document.body.style.cssText = `top: -${objScroll.scrollPosition}px;`\n    },\n\n    enabledScroll() {\n        document.body.classList.remove('block-scroll');\n        document.body.style.cssText = `top: 0`\n        window.scroll({top: objScroll.scrollPosition})\n    },\n}\n\ndivContainerEl.addEventListener('click', onReadId);\n\nfunction onReadId(event) {\n    \n    if (event.target.classList[0] === 'img-book' || event.target.classList[0] === 'owerlay') {\n        book_Id = event.target.parentElement.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    } else if (event.target.classList[0] === 'owerlay-content') {\n        book_Id = event.target.parentElement.parentElement.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    } else if (event.target.classList[0] === 'title-book' || event.target.classList[0] === 'author') {\n        book_Id = event.target.parentElement.dataset.id;\n        \n        createModalWindow(book_Id);\n    }\n}\n\nasync function createModalWindow(book_Id) {\n    objScroll.disabledScroll();\n    document.addEventListener(\"keydown\", event => {\n        if (event.key === 'Escape') {\n            onCloseModal();\n        }\n    }, {once: true} );\n    try {\n        const respons = await books.getBookById(book_Id);\n        const { author, book_image, description, title, buy_links } = respons.data;\n        const randerBox = document.querySelector('.book-img');\n        const nameBookEl = document.querySelector('#name-book');\n        const authorEl = document.querySelector('#author');\n        const descriptionEl = document.querySelector('#description');\n        const amazonEl = document.querySelector('#amazon');\n        const appleEl = document.querySelector('#apple');\n        const barnesEl = document.querySelector('#barnes');\n        randerBox.innerHTML = '';\n        const randerModal = `<img src=\"${book_image}\" alt=\"${book_image}\" class=\"img-modal\">`\n        nameBookEl.textContent = title;\n        authorEl.textContent = author;\n        if (description === '') {\n            descriptionEl.textContent = 'No description';\n        } else {\n            descriptionEl.textContent = description\n        }\n        \n        amazonEl.attributes[0].value = buy_links[0].url;\n        appleEl.attributes[0].value = buy_links[1].url;\n        barnesEl.attributes[0].value = buy_links[2].url;\n\n        randerBox.innerHTML = randerModal;\n        divBackEl.classList.toggle('is-hidden');\n        const dataJson = localStorage.getItem('orderedBookID');\n        const arrLs = JSON.parse(dataJson);\n        if (arrLs === null || !arrLs.includes(book_Id)) {\n            btnAddEl.classList.remove('is-hidden');\n        } else {\n            btnRemoveEl.classList.remove('is-hidden');\n            textEl.classList.remove('is-hidden');\n        }\n    } catch (error) {\n        console.error(error);\n        Notify.failure('Sorry, there was a server error, please reload the page');\n    }\n    \n};\n\nbtnCloseModal.addEventListener('click', onCloseModal);\n\nfunction onCloseModal() {\n    objScroll.enabledScroll();\n    divBackEl.classList.toggle('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    btnAddEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n}\n\nbtnAddEl.addEventListener('click', addLocalStorage);\nbtnRemoveEl.addEventListener('click', removeLocalStorage);\n\nfunction addLocalStorage() {\n    btnAddEl.classList.add('is-hidden');\n    btnRemoveEl.classList.remove('is-hidden');\n    textEl.classList.remove('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    let arrLs = JSON.parse(dataJson); //book_Id\n    /* console.log(arrLs) */\n    if (arrLs === null) {\n        arrLs = [];\n    }\n    arrLs.push(book_Id);\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    countShoppingBook(arrLs)\n};\n\nfunction removeLocalStorage() {\n    btnAddEl.classList.remove('is-hidden');\n    btnRemoveEl.classList.add('is-hidden');\n    textEl.classList.add('is-hidden');\n    const dataJson = localStorage.getItem('orderedBookID');\n    const arrLs = JSON.parse(dataJson);\n    let i = arrLs.indexOf(book_Id);\n    arrLs.splice(i, 1);\n    localStorage.removeItem('orderedBookID')\n    localStorage.setItem('orderedBookID', JSON.stringify(arrLs));\n    countShoppingBook(arrLs)\n};\n\n"],"names":["parcelRequire","$bpxeT","$02f93218786be7b6$export$ea014c4bbf7776ad","string","value","length","Number","str","subStr","step","count","helpStr","pos","indexOf","slice","$02f93218786be7b6$var$subStrCount","$02f93218786be7b6$export$9766e02b415b9ef1","arrWord","split","firstWord","splice","concat","join","$f07733ea329a6322$var$abortCtrl1","$f07733ea329a6322$var$abortCtrl2","$f07733ea329a6322$var$abortCtrl3","$f07733ea329a6322$var$fetchBooks","booksAPI","$f07733ea329a6322$var$categoryListBox","document","querySelector","$f07733ea329a6322$var$categoryList","$f07733ea329a6322$var$itemAllCategories","$f07733ea329a6322$var$loader1","$f07733ea329a6322$var$booksBox","$f07733ea329a6322$var$booksBoxTitle","$f07733ea329a6322$var$booksList","$f07733ea329a6322$var$loader2","$f07733ea329a6322$var$btnScroll","$f07733ea329a6322$var$fetchCategoryList","abortCtrl11","$f07733ea329a6322$var$_fetchCategoryList","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","data","getCategoryList","_ctx","sent","Notify","failure","t0","code","console","error","innerHTML","$f07733ea329a6322$var$fetchBestSellersBooks","abortCtrl21","$f07733ea329a6322$var$_fetchBestSellersBooks","getTopBooks","$f07733ea329a6322$var$fetchBooksOfCategory","category","abortCtrl31","$f07733ea329a6322$var$_fetchBooksOfCategory","getBooksByCategory","$f07733ea329a6322$var$createCategoryListMarkup","categoryListHTML","forEach","categoryLink","list_name","$f07733ea329a6322$var$createBestSellersBooksMarcup","querty","map","param1","books","booksOfCategory","param","_id","book_image","title","author","$f07733ea329a6322$var$createBooksOfCategoryMarcup","$f07733ea329a6322$var$_showCategoryList","$f07733ea329a6322$var$scrollUp","abort","log","classList","remove","AbortController","add","$f07733ea329a6322$var$showBestSellersBooks","$f07733ea329a6322$var$_showBestSellersBooks","pageWidth","toggle","documentElement","scrollWidth","$f07733ea329a6322$var$showBooksOfCategory","_","$f07733ea329a6322$var$_showBooksOfCategory","target","contains","id","$f07733ea329a6322$var$scrollToTitle","$f07733ea329a6322$var$_seeMore","event","preventDefault","window","scrollTo","top","behavior","scroll","offsetTop","left","$f07733ea329a6322$var$showCategoryList","addEventListener","click","offset","scrollY","pageYOffSet","highDocument","clientHeight","$dc327292a98b2944$var$book_Id","$dc327292a98b2944$var$books","$3w7gl","$dc327292a98b2944$var$divContainerEl","$dc327292a98b2944$var$divBackEl","$dc327292a98b2944$var$btnCloseModal","$dc327292a98b2944$var$btnAddEl","$dc327292a98b2944$var$btnRemoveEl","$dc327292a98b2944$var$textEl","$dc327292a98b2944$var$objScroll","scrollPosition","disabledScroll","body","style","cssText","enabledScroll","$dc327292a98b2944$var$createModalWindow","book_Id1","$dc327292a98b2944$var$_createModalWindow","respons","_data","description","buy_links","randerBox","nameBookEl","authorEl","descriptionEl","amazonEl","appleEl","barnesEl","randerModal","dataJson","arrLs","key","$dc327292a98b2944$var$onCloseModal","once","getBookById","textContent","attributes","url","localStorage","getItem","JSON","parse","includes","parentElement","dataset","push","setItem","stringify","$i8Q71","countShoppingBook","i","removeItem","$b8f9b7833fa37166$var$homeLinkEl","$b8f9b7833fa37166$var$mobileHomeLinkEl"],"version":3,"file":"index.e0522b56.js.map"}